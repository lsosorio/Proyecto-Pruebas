З╕
≤C:\Users\LuisOsorio\Desktop\Universidad\Semestre II\Pruebas\Proyecto Arquitectura\postgress\src\BusinessLogic\LogicServices\Services\CategoriaService.cs
	namespace 	
LogicServices
 
. 
Services  
{ 
public 

	interface 
ICategoriaService &
{ 
ResponseHelper 
< 
IEnumerable "
<" #
CategoriaGridView# 4
>4 5
>5 6
Todas7 <
(< =
)= >
;> ?
ResponseHelper 
< 
CategoriaGridView (
>( )
CategoriaPorId* 8
(8 9
Guid9 =
Id> @
)@ A
;A B
Task## 
<## 
bool## 
>## 
ExisteCategoria## "
(##" #
Guid### '
Id##( *
,##* +
string##, 2
Nombre##3 9
)##9 :
;##: ;
Task++ 
<++ 
ResponseHelper++ 
>++ 
CrearActualizar++ ,
(++, -
frmCategoria++- 9
frm++: =
)++= >
;++> ?
Task33 
<33 
ResponseHelper33 
>33 
ExisteCategoriaId33 .
(33. /
Guid33/ 3
CategoriaId334 ?
)33? @
;33@ A
ResponseHelper;; 
<;; 
DataTableResponse;; (
<;;( )
CategoriaGridView;;) :
>;;: ;
>;;; <#
CategoriasConPaginacion;;= T
(;;T U
DTParameterModel;;U e
model;;f k
);;k l
;;;l m
}>> 
public?? 

class?? 
CategoriaService?? !
:??" #
ICategoriaService??$ 5
{@@ 
privateAA 
readonlyAA 
IUnitOfWorkAA $
_unitOfWorkAA% 0
;AA0 1
privateBB 
readonlyBB 
IMapperBB  
_mapperBB! (
;BB( )
privateCC 
readonlyCC 
ILoggerCC  
_loggerCC! (
;CC( )
publicEE 
CategoriaServiceEE 
(EE  
IUnitOfWorkFF 

unitOfWorkFF "
,FF" #
IMapperGG 
mapperGG 
,GG 
ILoggerHH 
<HH 
CategoriaServiceHH $
>HH$ %
loggerHH& ,
)HH, -
{II 	
_unitOfWorkJJ 
=JJ 

unitOfWorkJJ $
;JJ$ %
_mapperKK 
=KK 
mapperKK 
;KK 
_loggerLL 
=LL 
loggerLL 
;LL 
}MM 	
publicQQ 
ResponseHelperQQ 
<QQ 
IEnumerableQQ )
<QQ) *
CategoriaGridViewQQ* ;
>QQ; <
>QQ< =
TodasQQ> C
(QQC D
)QQD E
{RR 	
varSS 
rhSS 
=SS 
newSS 
ResponseHelperSS '
<SS' (
IEnumerableSS( 3
<SS3 4
CategoriaGridViewSS4 E
>SSE F
>SSF G
(SSG H
)SSH I
;SSI J
tryUU 
{VV 
varWW 
lstCategoriasWW !
=WW" #
_unitOfWorkWW$ /
.WW/ 0
_categoriaRepoWW0 >
.WW> ?
GetAllWW? E
(WWE F
)WWF G
;WWG H
rhYY 
.YY 
ResultYY 
=YY 
_mapperYY #
.YY# $
MapYY$ '
<YY' (
IEnumerableYY( 3
<YY3 4
CategoriaGridViewYY4 E
>YYE F
>YYF G
(YYG H
lstCategoriasYYH U
)YYU V
;YYV W
rh[[ 
.[[ 
SetResponse[[ 
([[ 
true[[ #
,[[# $
m[[% &
:[[& '
$str[[( ,
,[[, -
	ErrorCode[[. 7
:[[7 8
$num[[9 <
)[[< =
;[[= >
}\\ 
catch]] 
(]] 
	Exception]] 
e]] 
)]] 
{^^ 
_logger__ 
.__ 
LogError__  
(__  !
e__! "
.__" #
Message__# *
,__* +
e__, -
)__- .
;__. /
rh`` 
.`` 
Message`` 
=`` 
e`` 
.`` 
Message`` &
;``& '
}aa 
returncc 
rhcc 
;cc 
}dd 	
publicgg 
ResponseHelpergg 
<gg 
CategoriaGridViewgg /
>gg/ 0
CategoriaPorIdgg1 ?
(gg? @
Guidgg@ D
IdggE G
)ggG H
{hh 	
varii 
rhii 
=ii 
newii 
ResponseHelperii '
<ii' (
CategoriaGridViewii( 9
>ii9 :
(ii: ;
)ii; <
;ii< =
trykk 
{ll 
varmm 
dbCategoriamm 
=mm  !
_unitOfWorkmm" -
.nn 
_categoriaReponn #
.oo 
Findoo 
(oo 
xoo 
=>oo 
xoo 
.oo 
Idoo !
==oo" $
Idoo% '
)oo' (
;oo( )
varqq 
resultqq 
=qq 
_mapperqq $
.qq$ %
Mapqq% (
<qq( )
CategoriaGridViewqq) :
>qq: ;
(qq; <
dbCategoriaqq< G
)qqG H
;qqH I
rhss 
.ss 
Resultss 
=ss 
resultss "
;ss" #
rhuu 
.uu 
SetResponseuu 
(uu 
trueuu #
,uu# $
muu% &
:uu& '
$struu( ,
,uu, -
	ErrorCodeuu. 7
:uu7 8
resultuu9 ?
!=uu@ B
nulluuC G
?uuH I
$numuuJ M
:uuN O
$numuuP S
)uuS T
;uuT U
}vv 
catchww 
(ww 
	Exceptionww 
eww 
)ww 
{xx 
_loggeryy 
.yy 
LogErroryy  
(yy  !
eyy! "
.yy" #
Messageyy# *
,yy* +
eyy, -
)yy- .
;yy. /
}zz 
return|| 
rh|| 
;|| 
}}} 	
public
── 
async
── 
Task
── 
<
── 
bool
── 
>
── 
ExisteCategoria
──  /
(
──/ 0
Guid
──0 4
Id
──5 7
,
──7 8
string
──9 ?
Nombre
──@ F
)
──F G
{
││ 	
var
┐┐ 
dato
┐┐ 
=
┐┐ 
await
┐┐ 
_unitOfWork
┐┐ (
.
┐┐( )
_categoriaRepo
┐┐) 7
.
└└ 
	FindAsync
└└ 
(
└└ 
x
└└ 
=>
└└ 
x
└└  !
.
└└! "
Nombre
└└" (
.
└└( )
ToLower
└└) 0
(
└└0 1
)
└└1 2
==
└└3 5
Nombre
└└6 <
.
└└< =
ToLower
└└= D
(
└└D E
)
└└E F
)
└└F G
;
└└G H
if
├├ 
(
├├ 
dato
├├ 
!=
├├ 
null
├├ 
)
├├ 
{
┤┤ 
if
┬┬ 
(
┬┬ 
dato
┬┬ 
.
┬┬ 
Id
┬┬ 
==
┬┬ 
Id
┬┬ !
)
┬┬! "
{
┴┴ 
return
┼┼ 
true
┼┼ 
;
┼┼  
}
▀▀ 
else
▄▄ 
{
██ 
return
▌▌ 
false
▌▌  
;
▌▌  !
}
▐▐ 
}
░░ 
else
▒▒ 
{
▓▓ 
return
⌠⌠ 
true
⌠⌠ 
;
⌠⌠ 
}
■■ 
}
√√ 	
public
≤≤ 
async
≤≤ 
Task
≤≤ 
<
≤≤ 
ResponseHelper
≤≤ (
>
≤≤( )
CrearActualizar
≤≤* 9
(
≤≤9 :
frmCategoria
≤≤: F
frm
≤≤G J
)
≤≤J K
{
≥≥ 	
if
   
(
   
frm
   
.
   
Id
   
.
   
ToString
   
(
   
)
    
==
  ! #
$str
  $ J
)
  J K
{
⌡⌡ 
return
°° 
await
°° 
Crear
°° "
(
°°" #
frm
°°# &
)
°°& '
;
°°' (
}
²² 
else
·· 
{
÷÷ 
return
══ 
await
══ 

Actualizar
══ '
(
══' (
frm
══( +
)
══+ ,
;
══, -
}
║║ 
}
╒╒ 	
public
╕╕ 
async
╕╕ 
Task
╕╕ 
<
╕╕ 
ResponseHelper
╕╕ (
>
╕╕( )
ExisteCategoriaId
╕╕* ;
(
╕╕; <
Guid
╕╕< @
CategoriaId
╕╕A L
)
╕╕L M
{
╖╖ 	
var
╗╗ 
rh
╗╗ 
=
╗╗ 
new
╗╗ 
ResponseHelper
╗╗ '
(
╗╗' (
)
╗╗( )
;
╗╗) *
try
╙╙ 
{
╚╚ 
var
╜╜ 
clsCategoria
╜╜  
=
╜╜! "
await
╜╜# (
_unitOfWork
╜╜) 4
.
╝╝ 
_categoriaRepo
╝╝ #
.
╞╞ 
	FindAsync
╞╞ 
(
╞╞ 
x
╞╞  
=>
╞╞! #
x
╞╞$ %
.
╞╞% &
Id
╞╞& (
==
╞╞) +
CategoriaId
╞╞, 7
)
╞╞7 8
;
╞╞8 9
rh
╡╡ 
.
╡╡ 
SetResponse
╡╡ 
(
╡╡ 
clsCategoria
╡╡ +
!=
╡╡, .
null
╡╡/ 3
?
╡╡4 5
true
╡╡6 :
:
╡╡; <
false
╡╡= B
,
╡╡B C
m
╡╡D E
:
╡╡E F
$str
╡╡G K
,
╡╡K L
	ErrorCode
╡╡M V
:
╡╡V W
$num
╡╡X [
)
╡╡[ \
;
╡╡\ ]
}
ЁЁ 
catch
╢╢ 
(
╢╢ 
	Exception
╢╢ 
e
╢╢ 
)
╢╢ 
{
╣╣ 
_logger
╤╤ 
.
╤╤ 
LogError
╤╤  
(
╤╤  !
e
╤╤! "
.
╤╤" #
Message
╤╤# *
,
╤╤* +
e
╤╤, -
)
╤╤- .
;
╤╤. /
rh
╥╥ 
.
╥╥ 
Message
╥╥ 
=
╥╥ 
e
╥╥ 
.
╥╥ 
Message
╥╥ &
;
╥╥& '
}
╦╦ 
return
╨╨ 
rh
╨╨ 
;
╨╨ 
}
╩╩ 	
public
╬╬ 
ResponseHelper
╬╬ 
<
╬╬ 
DataTableResponse
╬╬ /
<
╬╬/ 0
CategoriaGridView
╬╬0 A
>
╬╬A B
>
╬╬B C%
CategoriasConPaginacion
╬╬D [
(
╬╬[ \
DTParameterModel
╬╬\ l
model
╬╬m r
)
╬╬r s
{
©© 	
var
юю 
rh
юю 
=
юю 
new
юю 
ResponseHelper
юю '
<
юю' (
DataTableResponse
юю( 9
<
юю9 :
CategoriaGridView
юю: K
>
ююK L
>
ююL M
(
ююM N
)
ююN O
;
ююO P
try
бб 
{
цц 
int
дд "
filteredResultsCount
дд (
;
дд( )
int
ее 
totalResultsCount
ее %
;
ее% &
var
гг 
sortedColumns
гг !
=
гг" #
model
гг$ )
.
гг) *
Columns
гг* 1
;
гг1 2
var
хх 
orderByString
хх !
=
хх" #
String
хх$ *
.
хх* +
Empty
хх+ 0
;
хх0 1
orderByString
йй 
=
йй 
(
йй  !
sortedColumns
йй! .
[
йй. /
model
йй/ 4
.
йй4 5
Order
йй5 :
.
йй: ;
FirstOrDefault
йй; I
(
ййI J
)
ййJ K
.
ййK L
Column
ййL R
]
ййR S
.
ййS T
Data
ййT X
)
ййX Y
+
ййZ [
(
йй\ ]
model
йй] b
.
ййb c
Order
ййc h
.
ййh i
FirstOrDefault
ййi w
(
ййw x
)
ййx y
.
ййy z
Dir
ййz }
==йй~ ─
$strйй│ ├
?йй┤ ┬
$strйй┴ ▐
:йй░ ▒
$strйй▓ ≥
)йй≥  
;йй  ⌡
var
лл 
data
лл 
=
лл 
(
лл 
_unitOfWork
лл '
.
лл' (
_categoriaRepo
лл( 6
.
лл6 7
GetAll
лл7 =
(
лл= >
)
лл> ?
)
лл? @
.
мм 
Select
мм 
(
мм 
x
мм 
=>
мм  
new
мм! $
CategoriaGridView
мм% 6
(
мм6 7
)
мм7 8
{
нн 
Id
оо 
=
оо 
x
оо 
.
оо 
Id
оо !
,
оо! "
Nombre
пп 
=
пп  
x
пп! "
.
пп" #
Nombre
пп# )
}
яя 
)
яя 
.
рр 
OrderBy
рр 
(
рр 
orderByString
рр *
)
рр* +
.
рр+ ,
AsQueryable
рр, 7
(
рр7 8
)
рр8 9
;
рр9 :
totalResultsCount
тт !
=
тт" #
data
тт$ (
.
тт( )
Count
тт) .
(
тт. /
)
тт/ 0
;
тт0 1
if
жж 
(
жж 
!
жж 
String
жж 
.
жж 
IsNullOrEmpty
жж )
(
жж) *
model
жж* /
.
жж/ 0
Search
жж0 6
.
жж6 7
Value
жж7 <
)
жж< =
)
жж= >
{
вв 
data
ьь 
=
ьь 
data
ьь 
.
ьь  
Where
ьь  %
(
ьь% &
x
ьь& '
=>
ьь( *
x
ыы 
.
ыы 
Nombre
ыы #
.
ыы# $
Contains
ыы$ ,
(
ыы, -
model
ыы- 2
.
ыы2 3
Search
ыы3 9
.
ыы9 :
Value
ыы: ?
)
ыы? @
||
зз 
x
зз 
.
зз 
Nombre
зз #
.
зз# $
EndsWith
зз$ ,
(
зз, -
model
зз- 2
.
зз2 3
Search
зз3 9
.
зз9 :
Value
зз: ?
)
зз? @
)
шш 
;
шш 
}
ээ "
filteredResultsCount
чч $
=
чч% &
data
чч' +
.
чч+ ,
Count
чч, 1
(
чч1 2
)
чч2 3
;
чч3 4
var
ЮЮ 
salida
ЮЮ 
=
ЮЮ 
data
ЮЮ !
.
АА 
Skip
АА !
(
АА! "
model
АА" '
.
АА' (
Start
АА( -
)
АА- .
.
ББ 
Take
ББ !
(
ББ! "
model
ББ" '
.
ББ' (
Length
ББ( .
)
ББ. /
;
ББ/ 0
rh
ДД 
.
ДД 
Result
ДД 
=
ДД 
new
ДД 
DataTableResponse
ДД  1
<
ДД1 2
CategoriaGridView
ДД2 C
>
ДДC D
(
ДДD E
)
ДДE F
{
ЕЕ 
draw
ФФ 
=
ФФ 
model
ФФ  
.
ФФ  !
Draw
ФФ! %
,
ФФ% &
data
ГГ 
=
ГГ 
salida
ГГ !
.
ГГ! "
ToList
ГГ" (
(
ГГ( )
)
ГГ) *
,
ГГ* +
recordsFiltered
ХХ #
=
ХХ$ %"
filteredResultsCount
ХХ& :
,
ХХ: ;
recordsTotal
ИИ  
=
ИИ! "
totalResultsCount
ИИ# 4
}
ЙЙ 
;
ЙЙ 
rh
КК 
.
КК 
SetResponse
КК 
(
КК 
true
КК #
)
КК# $
;
КК$ %
}
ЛЛ 
catch
ММ 
(
ММ 
	Exception
ММ 
e
ММ 
)
ММ 
{
НН 
_logger
ОО 
.
ОО 
LogError
ОО  
(
ОО  !
e
ОО! "
.
ОО" #
Message
ОО# *
,
ОО* +
e
ОО, -
)
ОО- .
;
ОО. /
rh
ПП 
.
ПП 
SetResponse
ПП 
(
ПП 
false
ПП $
,
ПП$ %
m
ПП& '
:
ПП' (
e
ПП) *
.
ПП* +
Message
ПП+ 2
)
ПП2 3
;
ПП3 4
}
ЯЯ 
return
СС 
rh
СС 
;
СС 
}
ТТ 	
private
ВВ 
async
ВВ 
Task
ВВ 
<
ВВ 
ResponseHelper
ВВ )
>
ВВ) *
Crear
ВВ+ 0
(
ВВ0 1
frmCategoria
ВВ1 =
frm
ВВ> A
)
ВВA B
{
ЬЬ 	
var
ЫЫ 
rh
ЫЫ 
=
ЫЫ 
new
ЫЫ 
ResponseHelper
ЫЫ '
(
ЫЫ' (
)
ЫЫ( )
;
ЫЫ) *
try
ШШ 
{
ЭЭ 
await
ЩЩ 
_unitOfWork
ЩЩ !
.
ЩЩ! "#
BeginTransactionAsync
ЩЩ" 7
(
ЩЩ7 8
)
ЩЩ8 9
;
ЩЩ9 :
var
ЪЪ 
model
ЪЪ 
=
ЪЪ 
_mapper
ЪЪ #
.
ЪЪ# $
Map
ЪЪ$ '
<
ЪЪ' (
	Categoria
ЪЪ( 1
>
ЪЪ1 2
(
ЪЪ2 3
frm
ЪЪ3 6
)
ЪЪ6 7
;
ЪЪ7 8
await
││ 
_unitOfWork
││ !
.
││! "
_categoriaRepo
││" 0
.
││0 1
AddAsync
││1 9
(
││9 :
model
││: ?
)
││? @
;
││@ A
await
┐┐ 
_unitOfWork
┐┐ !
.
┐┐! "
	SaveAsync
┐┐" +
(
┐┐+ ,
)
┐┐, -
;
┐┐- .
_unitOfWork
┘┘ 
.
┘┘ 
Commit
┘┘ "
(
┘┘" #
)
┘┘# $
;
┘┘$ %
rh
┤┤ 
.
┤┤ 
SetResponse
┤┤ 
(
┤┤ 
true
┤┤ #
,
┤┤# $
m
┤┤% &
:
┤┤& '
$str
┤┤( ,
,
┤┤, -
TraId
┤┤. 3
:
┤┤3 4
model
┤┤5 :
.
┤┤: ;
Id
┤┤; =
.
┤┤= >
ToString
┤┤> F
(
┤┤F G
)
┤┤G H
,
┤┤H I
	ErrorCode
┤┤J S
:
┤┤S T
$num
┤┤U X
)
┤┤X Y
;
┤┤Y Z
}
┬┬ 
catch
┴┴ 
(
┴┴ 
	Exception
┴┴ 
e
┴┴ 
)
┴┴ 
{
┼┼ 
_logger
▀▀ 
.
▀▀ 
LogError
▀▀  
(
▀▀  !
e
▀▀! "
.
▀▀" #
Message
▀▀# *
,
▀▀* +
e
▀▀, -
)
▀▀- .
;
▀▀. /
rh
▄▄ 
.
▄▄ 
Message
▄▄ 
=
▄▄ 
e
▄▄ 
.
▄▄ 
Message
▄▄ &
;
▄▄& '
}
██ 
return
▐▐ 
rh
▐▐ 
;
▐▐ 
}
░░ 	
private
▓▓ 
async
▓▓ 
Task
▓▓ 
<
▓▓ 
ResponseHelper
▓▓ )
>
▓▓) *

Actualizar
▓▓+ 5
(
▓▓5 6
frmCategoria
▓▓6 B
frm
▓▓C F
)
▓▓F G
{
⌠⌠ 	
var
■■ 
rh
■■ 
=
■■ 
new
■■ 
ResponseHelper
■■ '
(
■■' (
)
■■( )
;
■■) *
try
√√ 
{
≈≈ 
await
≤≤ 
_unitOfWork
≤≤ !
.
≤≤! "#
BeginTransactionAsync
≤≤" 7
(
≤≤7 8
)
≤≤8 9
;
≤≤9 :
var
   
modelCategoria
   "
=
  # $
await
  % *
_unitOfWork
  + 6
.
  6 7
_categoriaRepo
  7 E
.
  E F
	FindAsync
  F O
(
  O P
x
  P Q
=>
  R T
x
  U V
.
  V W
Id
  W Y
==
  Z \
frm
  ] `
.
  ` a
Id
  a c
)
  c d
;
  d e
modelCategoria
°° 
.
°° 
Nombre
°° %
=
°°& '
frm
°°( +
.
°°+ ,
Nombre
°°, 2
;
°°2 3
await
·· 
_unitOfWork
·· !
.
··! "
_categoriaRepo
··" 0
.
··0 1
UpdateAsync
··1 <
(
··< =
modelCategoria
··= K
,
··K L
frm
··M P
.
··P Q
Id
··Q S
)
··S T
;
··T U
await
══ 
_unitOfWork
══ !
.
══! "
	SaveAsync
══" +
(
══+ ,
)
══, -
;
══- .
_unitOfWork
╒╒ 
.
╒╒ 
Commit
╒╒ "
(
╒╒" #
)
╒╒# $
;
╒╒$ %
rh
╓╓ 
.
╓╓ 
SetResponse
╓╓ 
(
╓╓ 
true
╓╓ #
,
╓╓# $
m
╓╓% &
:
╓╓& '
$str
╓╓( ,
,
╓╓, -
TraId
╓╓. 3
:
╓╓3 4
modelCategoria
╓╓5 C
.
╓╓C D
Id
╓╓D F
.
╓╓F G
ToString
╓╓G O
(
╓╓O P
)
╓╓P Q
,
╓╓Q R
	ErrorCode
╓╓S \
:
╓╓\ ]
$num
╓╓^ a
)
╓╓a b
;
╓╓b c
}
╔╔ 
catch
╕╕ 
(
╕╕ 
	Exception
╕╕ 
e
╕╕ 
)
╕╕ 
{
╖╖ 
_logger
╗╗ 
.
╗╗ 
LogError
╗╗  
(
╗╗  !
e
╗╗! "
.
╗╗" #
Message
╗╗# *
,
╗╗* +
e
╗╗, -
)
╗╗- .
;
╗╗. /
rh
╘╘ 
.
╘╘ 
Message
╘╘ 
=
╘╘ 
e
╘╘ 
.
╘╘ 
Message
╘╘ &
;
╘╘& '
}
╙╙ 
return
╛╛ 
rh
╛╛ 
;
╛╛ 
}
╜╜ 	
}
╝╝ 
}╞╞ зб
·C:\Users\LuisOsorio\Desktop\Universidad\Semestre II\Pruebas\Proyecto Arquitectura\postgress\src\BusinessLogic\LogicServices\Services\EntretenimientoService.cs
	namespace 	
LogicServices
 
. 
Services  
{ 
public 

	interface #
IEntretenimientoService ,
{ 
ResponseHelper 
< 
IEnumerable "
<" ##
EntretenimientoGridView# :
>: ;
>; <
Todas= B
(B C
)C D
;D E
ResponseHelper 
< 
IEnumerable "
<" ##
EntretenimientoGridView# :
>: ;
>; <
InfiniteScroll= K
(K L$
frmEntretenimientoScrollL d
modele j
)j k
;k l
ResponseHelper&& 
<&& #
EntretenimientoGridView&& .
>&&. /
	BuscarUna&&0 9
(&&9 :
Guid&&: >
Id&&? A
)&&A B
;&&B C
Task// 
<// 
bool// 
>// !
ExisteEntretenimiento// (
(//( )
Guid//) -
Id//. 0
,//0 1
string//2 8
Titulo//9 ?
)//? @
;//@ A
ResponseHelper77 
CrearActualizar77 &
(77& '
frmEntretenimiento77' 9
frm77: =
)77= >
;77> ?
ResponseHelper?? 
<?? 
IEnumerable?? "
<??" ##
EntretenimientoGridView??# :
>??: ;
>??; <
PorCategoria??= I
(??I J
Guid??J N
???N O
gCategoriaId??P \
)??\ ]
;??] ^
ResponseHelperGG 
<GG 
DataTableResponseGG (
<GG( )#
EntretenimientoGridViewGG) @
>GG@ A
>GGA B"
PeliculasConPaginacionGGC Y
(GGY Z
DTParameterModelGGZ j
modelGGk p
)GGp q
;GGq r
}II 
publicJJ 

classJJ "
EntretenimientoServiceJJ '
:JJ( )#
IEntretenimientoServiceJJ* A
{KK 
privateLL 
readonlyLL 
IUnitOfWorkLL $
_unitOfWorkLL% 0
;LL0 1
privateMM 
readonlyMM 
IMapperMM  
_mapperMM! (
;MM( )
privateNN 
readonlyNN 
ILoggerNN  
_loggerNN! (
;NN( )
publicPP "
EntretenimientoServicePP %
(PP% &
IUnitOfWorkQQ 

unitOfWorkQQ "
,QQ" #
IMapperRR 
mapperRR 
,RR 
ILoggerSS 
<SS "
EntretenimientoServiceSS *
>SS* +
loggerSS, 2
)SS2 3
{TT 	
_unitOfWorkUU 
=UU 

unitOfWorkUU $
;UU$ %
_mapperVV 
=VV 
mapperVV 
;VV 
_loggerWW 
=WW 
loggerWW 
;WW 
}XX 	
publicZZ 
asyncZZ 
TaskZZ 
<ZZ 
boolZZ 
>ZZ !
ExisteEntretenimientoZZ  5
(ZZ5 6
GuidZZ6 :
IdZZ; =
,ZZ= >
stringZZ? E
TituloZZF L
)ZZL M
{[[ 	
var]] 
dato]] 
=]] 
await]] 
_unitOfWork]] (
.]]( ) 
_entretenimientoRepo]]) =
.^^ 
	FindAsync^^ 
(^^ 
x^^ 
=>^^ 
x^^  !
.^^! "
Titulo^^" (
.^^( )
ToLower^^) 0
(^^0 1
)^^1 2
==^^3 5
Titulo^^6 <
.^^< =
ToLower^^= D
(^^D E
)^^E F
)^^F G
;^^G H
if`` 
(`` 
dato`` 
!=`` 
null`` 
)`` 
{aa 
ifbb 
(bb 
datobb 
.bb 
Idbb 
==bb 
Idbb !
)bb! "
{cc 
returndd 
truedd 
;dd  
}ee 
elseff 
{gg 
returnhh 
falsehh  
;hh  !
}ii 
}jj 
elsekk 
{ll 
returnmm 
truemm 
;mm 
}nn 
}pp 	
publicss 
ResponseHelperss 
<ss 
IEnumerabless )
<ss) *#
EntretenimientoGridViewss* A
>ssA B
>ssB C
TodasssD I
(ssI J
)ssJ K
{tt 	
varuu 
rhuu 
=uu 
newuu 
ResponseHelperuu '
<uu' (
IEnumerableuu( 3
<uu3 4#
EntretenimientoGridViewuu4 K
>uuK L
>uuL M
(uuM N
)uuN O
;uuO P
tryww 
{xx 
varyy 
lstEntrenimientosyy %
=yy& '
(yy( )
_unitOfWorkyy) 4
.zz  
_entretenimientoRepozz )
.{{ 
GetAll{{ 
({{ 
){{ 
){{ 
;{{ 
var}} 
	lstSalida}} 
=}} 
lstEntrenimientos}}  1
.~~ 
AsQueryable~~  
(~~  !
)~~! "
. 
Select 
( 
x 
=>  
new! $#
EntretenimientoGridView% <
{
── 
Id
││ 
=
││ 
x
││ 
.
││ 
Id
││ !
,
││! "
Ano
┌┌ 
=
┌┌ 
x
┌┌ 
.
┌┌  
Ano
┌┌  #
,
┌┌# $
Titulo
┐┐ 
=
┐┐  
x
┐┐! "
.
┐┐" #
Titulo
┐┐# )
,
┐┐) *
	Direccion
└└ !
=
└└" #
x
└└$ %
.
└└% &
	Direccion
└└& /
,
└└/ 0

Fotografia
┘┘ "
=
┘┘# $
x
┘┘% &
.
┘┘& '

Fotografia
┘┘' 1
,
┘┘1 2
Musica
├├ 
=
├├  
x
├├! "
.
├├" #
Musica
├├# )
,
├├) *
Pais
┤┤ 
=
┤┤ 
x
┤┤  
.
┤┤  !
Pais
┤┤! %
,
┤┤% &

Productora
┬┬ "
=
┬┬# $
x
┬┬% &
.
┬┬& '

Productora
┬┬' 1
,
┬┬1 2
Reparto
┴┴ 
=
┴┴  !
x
┴┴" #
.
┴┴# $
Reparto
┴┴$ +
,
┴┴+ ,
Snopsis
┼┼ 
=
┼┼  !
x
┼┼" #
.
┼┼# $
Snopsis
┼┼$ +
,
┼┼+ ,

Categorias
▀▀ "
=
▀▀# $
x
▀▀% &
.
▀▀& '

Categorias
▀▀' 1
.
▀▀1 2
Select
▀▀2 8
(
▀▀8 9
y
▀▀9 :
=>
▀▀; =
new
▀▀> A
CategoriaGridView
▀▀B S
(
▀▀S T
)
▀▀T U
{
▀▀V W
Id
▄▄ 
=
▄▄  
y
▄▄! "
.
▄▄" #
CategoriaId
▄▄# .
,
▄▄. /
Nombre
██ "
=
██# $
y
██% &
.
██& '
	Categoria
██' 0
.
██0 1
Nombre
██1 7
}
▌▌ 
)
▌▌ 
,
▌▌ 
	ImagenUrl
▐▐ !
=
▐▐" #
x
▐▐$ %
.
▐▐% &
	ImagenUrl
▐▐& /
}
░░ 
)
░░ 
;
░░ 
rh
▓▓ 
.
▓▓ 
Result
▓▓ 
=
▓▓ 
	lstSalida
▓▓ %
;
▓▓% &
rh
■■ 
.
■■ 
SetResponse
■■ 
(
■■ 
true
■■ #
,
■■# $
m
■■% &
:
■■& '
$str
■■( ,
,
■■, -
	ErrorCode
■■. 7
:
■■7 8
$num
■■9 <
)
■■< =
;
■■= >
}
√√ 
catch
≈≈ 
(
≈≈ 
	Exception
≈≈ 
e
≈≈ 
)
≈≈ 
{
≤≤ 
_logger
≥≥ 
.
≥≥ 
LogError
≥≥  
(
≥≥  !
e
≥≥! "
.
≥≥" #
Message
≥≥# *
,
≥≥* +
e
≥≥, -
)
≥≥- .
;
≥≥. /
rh
   
.
   
Message
   
=
   
e
   
.
   
Message
   &
;
  & '
}
⌡⌡ 
return
²² 
rh
²² 
;
²² 
}
·· 	
public
══ 
ResponseHelper
══ 
<
══ 
IEnumerable
══ )
<
══) *%
EntretenimientoGridView
══* A
>
══A B
>
══B C
InfiniteScroll
══D R
(
══R S&
frmEntretenimientoScroll
══S k
model
══l q
)
══q r
{
║║ 	
var
╒╒ 
rh
╒╒ 
=
╒╒ 
new
╒╒ 
ResponseHelper
╒╒ '
<
╒╒' (
IEnumerable
╒╒( 3
<
╒╒3 4%
EntretenimientoGridView
╒╒4 K
>
╒╒K L
>
╒╒L M
(
╒╒M N
)
╒╒N O
;
╒╒O P
try
╓╓ 
{
╔╔ 
Console
╕╕ 
.
╕╕ 
	WriteLine
╕╕ !
(
╕╕! "
JsonConvert
╕╕" -
.
╕╕- .
SerializeObject
╕╕. =
(
╕╕= >
model
╕╕> C
)
╕╕C D
)
╕╕D E
;
╕╕E F
var
╖╖ 
lstEntrenimientos
╖╖ %
=
╖╖& '
(
╖╖( )
_unitOfWork
╖╖) 4
.
╗╗ "
_entretenimientoRepo
╗╗ )
.
╘╘ 
GetAll
╘╘ 
(
╘╘ 
)
╘╘ 
)
╘╘ 
;
╘╘ 
if
╚╚ 
(
╚╚ 
model
╚╚ 
.
╚╚ 
	categoria
╚╚ "
!=
╚╚# %
null
╚╚& *
)
╚╚* +
{
╛╛ 
var
╜╜ "
lstEntrePorCategoria
╜╜ ,
=
╜╜- .
_unitOfWork
╜╜/ :
.
╝╝ %
_entretenimientoCatRepo
╝╝ 0
.
╞╞ 
FindAll
╞╞  
(
╞╞  !
x
╞╞! "
=>
╞╞# %
x
╞╞& '
.
╞╞' (
CategoriaId
╞╞( 3
==
╞╞4 6
model
╞╞7 <
.
╞╞< =
	categoria
╞╞= F
)
╞╞F G
.
╟╟ 
Select
╟╟ 
(
╟╟  
x
╟╟  !
=>
╟╟" $
x
╟╟% &
.
╟╟& '
EntretenimientoId
╟╟' 8
)
╟╟8 9
;
╟╟9 :
lstEntrenimientos
╡╡ %
=
╡╡& '
lstEntrenimientos
╡╡( 9
.
ЁЁ 
Where
ЁЁ 
(
ЁЁ 
x
ЁЁ  
=>
ЁЁ! #"
lstEntrePorCategoria
ЁЁ$ 8
.
ЁЁ8 9
Contains
ЁЁ9 A
(
ЁЁA B
x
ЁЁB C
.
ЁЁC D
Id
ЁЁD F
)
ЁЁF G
)
ЁЁG H
;
ЁЁH I
}
╢╢ 
var
╤╤ 
	lstSalida
╤╤ 
=
╤╤ 
lstEntrenimientos
╤╤  1
.
╥╥ 
AsQueryable
╥╥  
(
╥╥  !
)
╥╥! "
.
╦╦ 
OrderBy
╦╦ 
(
╦╦ 
x
╦╦ 
=>
╦╦  
x
╦╦  !
.
╦╦! "
	CreatedAt
╦╦" +
)
╦╦+ ,
.
╧╧ 
Select
╧╧ 
(
╧╧ 
x
╧╧ 
=>
╧╧  
new
╧╧! $%
EntretenimientoGridView
╧╧% <
{
╨╨ 
Id
╩╩ 
=
╩╩ 
x
╩╩ 
.
╩╩ 
Id
╩╩ !
,
╩╩! "
Ano
╪╪ 
=
╪╪ 
x
╪╪ 
.
╪╪  
Ano
╪╪  #
,
╪╪# $
Titulo
╫╫ 
=
╫╫  
x
╫╫! "
.
╫╫" #
Titulo
╫╫# )
,
╫╫) *
	Direccion
╬╬ !
=
╬╬" #
x
╬╬$ %
.
╬╬% &
	Direccion
╬╬& /
,
╬╬/ 0

Fotografia
©© "
=
©©# $
x
©©% &
.
©©& '

Fotografia
©©' 1
,
©©1 2
Musica
юю 
=
юю  
x
юю! "
.
юю" #
Musica
юю# )
,
юю) *
Pais
аа 
=
аа 
x
аа  
.
аа  !
Pais
аа! %
,
аа% &

Productora
бб "
=
бб# $
x
бб% &
.
бб& '

Productora
бб' 1
,
бб1 2
Reparto
цц 
=
цц  !
x
цц" #
.
цц# $
Reparto
цц$ +
,
цц+ ,
Snopsis
дд 
=
дд  !
x
дд" #
.
дд# $
Snopsis
дд$ +
,
дд+ ,

Categorias
ее "
=
ее# $
x
ее% &
.
ее& '

Categorias
ее' 1
.
ее1 2
Select
ее2 8
(
ее8 9
y
ее9 :
=>
ее; =
new
ее> A
CategoriaGridView
ееB S
(
ееS T
)
ееT U
{
фф 
Id
гг 
=
гг  
y
гг! "
.
гг" #
CategoriaId
гг# .
,
гг. /
Nombre
хх "
=
хх# $
y
хх% &
.
хх& '
	Categoria
хх' 0
.
хх0 1
Nombre
хх1 7
}
ии 
)
ии 
,
ии 
	ImagenUrl
йй !
=
йй" #
x
йй$ %
.
йй% &
	ImagenUrl
йй& /
}
кк 
)
кк 
.
лл 
Skip
лл 
(
лл 
$num
лл 
*
лл 
model
лл #
.
лл# $
numeroPagina
лл$ 0
)
лл0 1
.
лл1 2
Take
лл2 6
(
лл6 7
$num
лл7 9
)
лл9 :
;
лл: ;
rh
нн 
.
нн 
Result
нн 
=
нн 
	lstSalida
нн %
;
нн% &
rh
пп 
.
пп 
SetResponse
пп 
(
пп 
true
пп #
,
пп# $
m
пп% &
:
пп& '
$str
пп( ,
,
пп, -
	ErrorCode
пп. 7
:
пп7 8
$num
пп9 <
)
пп< =
;
пп= >
}
рр 
catch
сс 
(
сс 
	Exception
сс 
e
сс 
)
сс 
{
тт 
_logger
уу 
.
уу 
LogError
уу  
(
уу  !
e
уу! "
.
уу" #
Message
уу# *
,
уу* +
e
уу, -
)
уу- .
;
уу. /
rh
жж 
.
жж 
Message
жж 
=
жж 
e
жж 
.
жж 
Message
жж &
;
жж& '
}
вв 
return
ыы 
rh
ыы 
;
ыы 
}
зз 	
public
щщ 
ResponseHelper
щщ 
<
щщ %
EntretenimientoGridView
щщ 5
>
щщ5 6
	BuscarUna
щщ7 @
(
щщ@ A
Guid
щщA E
Id
щщF H
)
щщH I
{
чч 	
var
ъъ 
rh
ъъ 
=
ъъ 
new
ъъ 
ResponseHelper
ъъ '
<
ъъ' (%
EntretenimientoGridView
ъъ( ?
>
ъъ? @
(
ъъ@ A
)
ъъA B
;
ъъB C
try
АА 
{
ББ 
var
ЦЦ 
lstEntrenimientos
ЦЦ %
=
ЦЦ& '
_unitOfWork
ЦЦ( 3
.
ДД "
_entretenimientoRepo
ДД )
.
ЕЕ 
FindBy
ЕЕ 
(
ЕЕ 
x
ЕЕ 
=>
ЕЕ 
x
ЕЕ  
.
ЕЕ  !
Id
ЕЕ! #
==
ЕЕ$ &
Id
ЕЕ' )
)
ЕЕ) *
;
ЕЕ* +
var
ГГ 
	lstSalida
ГГ 
=
ГГ 
lstEntrenimientos
ГГ  1
.
ХХ 
AsQueryable
ХХ  
(
ХХ  !
)
ХХ! "
.
ИИ 
Select
ИИ 
(
ИИ 
x
ИИ 
=>
ИИ  
new
ИИ! $%
EntretenimientoGridView
ИИ% <
{
ЙЙ 
Id
КК 
=
КК 
x
КК 
.
КК 
Id
КК !
,
КК! "
Ano
ЛЛ 
=
ЛЛ 
x
ЛЛ 
.
ЛЛ  
Ano
ЛЛ  #
,
ЛЛ# $
Titulo
ММ 
=
ММ  
x
ММ! "
.
ММ" #
Titulo
ММ# )
,
ММ) *
	Direccion
НН !
=
НН" #
x
НН$ %
.
НН% &
	Direccion
НН& /
,
НН/ 0

Fotografia
ОО "
=
ОО# $
x
ОО% &
.
ОО& '

Fotografia
ОО' 1
,
ОО1 2
Musica
ПП 
=
ПП  
x
ПП! "
.
ПП" #
Musica
ПП# )
,
ПП) *
Pais
ЯЯ 
=
ЯЯ 
x
ЯЯ  
.
ЯЯ  !
Pais
ЯЯ! %
,
ЯЯ% &

Productora
РР "
=
РР# $
x
РР% &
.
РР& '

Productora
РР' 1
,
РР1 2
Reparto
СС 
=
СС  !
x
СС" #
.
СС# $
Reparto
СС$ +
,
СС+ ,
Snopsis
ТТ 
=
ТТ  !
x
ТТ" #
.
ТТ# $
Snopsis
ТТ$ +
,
ТТ+ ,

Categorias
УУ "
=
УУ# $
x
УУ% &
.
УУ& '

Categorias
УУ' 1
.
УУ1 2
Select
УУ2 8
(
УУ8 9
y
УУ9 :
=>
УУ; =
new
УУ> A
CategoriaGridView
УУB S
(
УУS T
)
УУT U
{
ЖЖ 
Id
ВВ 
=
ВВ  
y
ВВ! "
.
ВВ" #
CategoriaId
ВВ# .
,
ВВ. /
Nombre
ЬЬ "
=
ЬЬ# $
y
ЬЬ% &
.
ЬЬ& '
	Categoria
ЬЬ' 0
.
ЬЬ0 1
Nombre
ЬЬ1 7
}
ЫЫ 
)
ЫЫ 
}
ЗЗ 
)
ЗЗ 
.
ЗЗ 
FirstOrDefault
ЗЗ %
(
ЗЗ% &
)
ЗЗ& '
;
ЗЗ' (
rh
ЭЭ 
.
ЭЭ 
Result
ЭЭ 
=
ЭЭ 
	lstSalida
ЭЭ %
;
ЭЭ% &
rh
ЧЧ 
.
ЧЧ 
SetResponse
ЧЧ 
(
ЧЧ 
true
ЧЧ #
,
ЧЧ# $
m
ЧЧ% &
:
ЧЧ& '
$str
ЧЧ( ,
,
ЧЧ, -
	ErrorCode
ЧЧ. 7
:
ЧЧ7 8
$num
ЧЧ9 <
)
ЧЧ< =
;
ЧЧ= >
}
── 
catch
││ 
(
││ 
	Exception
││ 
e
││ 
)
││ 
{
┌┌ 
_logger
┐┐ 
.
┐┐ 
LogError
┐┐  
(
┐┐  !
e
┐┐! "
.
┐┐" #
Message
┐┐# *
,
┐┐* +
e
┐┐, -
)
┐┐- .
;
┐┐. /
rh
└└ 
.
└└ 
Message
└└ 
=
└└ 
e
└└ 
.
└└ 
Message
└└ &
;
└└& '
}
┘┘ 
return
┤┤ 
rh
┤┤ 
;
┤┤ 
}
┬┬ 	
public
▀▀ 
ResponseHelper
▀▀ 
CrearActualizar
▀▀ -
(
▀▀- . 
frmEntretenimiento
▀▀. @
frm
▀▀A D
)
▀▀D E
{
▄▄ 	
if
██ 
(
██ 
frm
██ 
.
██ 
Id
██ 
.
██ 
ToString
██ 
(
██  
)
██  !
==
██" $
$str
██% K
)
██K L
{
▌▌ 
return
▐▐ 
Crear
▐▐ 
(
▐▐ 
frm
▐▐  
)
▐▐  !
;
▐▐! "
}
░░ 
else
▒▒ 
{
▓▓ 
return
⌠⌠ 

Actualizar
⌠⌠ !
(
⌠⌠! "
frm
⌠⌠" %
)
⌠⌠% &
;
⌠⌠& '
}
■■ 
}
∙∙ 	
public
≤≤ 
ResponseHelper
≤≤ 
<
≤≤ 
IEnumerable
≤≤ )
<
≤≤) *%
EntretenimientoGridView
≤≤* A
>
≤≤A B
>
≤≤B C
PorCategoria
≤≤D P
(
≤≤P Q
Guid
≤≤Q U
?
≤≤U V
gCategoriaId
≤≤W c
)
≤≤c d
{
≥≥ 	
var
   
rh
   
=
   
new
   
ResponseHelper
   '
<
  ' (
IEnumerable
  ( 3
<
  3 4%
EntretenimientoGridView
  4 K
>
  K L
>
  L M
(
  M N
)
  N O
;
  O P
try
°° 
{
²² 
var
·· 
lstEntrenimientos
·· %
=
··& '
_unitOfWork
··( 3
.
÷÷ "
_entretenimientoRepo
÷÷ )
.
══ 
GetAll
══ 
(
══ 
)
══ 
;
══ 
if
╒╒ 
(
╒╒ 
gCategoriaId
╒╒ 
!=
╒╒  "
null
╒╒# '
)
╒╒' (
{
ёё 
var
╓╓ "
lstEntrePorCategoria
╓╓ ,
=
╓╓- .
_unitOfWork
╓╓/ :
.
╔╔ %
_entretenimientoCatRepo
╔╔ 0
.
╕╕ 
FindAll
╕╕  
(
╕╕  !
x
╕╕! "
=>
╕╕# %
x
╕╕& '
.
╕╕' (
CategoriaId
╕╕( 3
==
╕╕4 6
gCategoriaId
╕╕7 C
)
╕╕C D
.
╖╖ 
Select
╖╖ 
(
╖╖  
x
╖╖  !
=>
╖╖" $
x
╖╖% &
.
╖╖& '
EntretenimientoId
╖╖' 8
)
╖╖8 9
;
╖╖9 :
lstEntrenimientos
╘╘ %
=
╘╘& '
lstEntrenimientos
╘╘( 9
.
╙╙ 
Where
╙╙ 
(
╙╙ 
x
╙╙  
=>
╙╙! #"
lstEntrePorCategoria
╙╙$ 8
.
╙╙8 9
Contains
╙╙9 A
(
╙╙A B
x
╙╙B C
.
╙╙C D
Id
╙╙D F
)
╙╙F G
)
╙╙G H
;
╙╙H I
}
╚╚ 
var
╜╜ 
	lstSalida
╜╜ 
=
╜╜ 
lstEntrenimientos
╜╜  1
.
╝╝ 
Select
╝╝ 
(
╝╝ 
x
╝╝ 
=>
╝╝  
new
╝╝! $%
EntretenimientoGridView
╝╝% <
{
╞╞ 
Id
╟╟ 
=
╟╟ 
x
╟╟ 
.
╟╟ 
Id
╟╟ !
,
╟╟! "
Ano
╠╠ 
=
╠╠ 
x
╠╠ 
.
╠╠  
Ano
╠╠  #
,
╠╠# $
Titulo
╡╡ 
=
╡╡  
x
╡╡! "
.
╡╡" #
Titulo
╡╡# )
,
╡╡) *
	Direccion
ЁЁ !
=
ЁЁ" #
x
ЁЁ$ %
.
ЁЁ% &
	Direccion
ЁЁ& /
,
ЁЁ/ 0

Fotografia
╢╢ "
=
╢╢# $
x
╢╢% &
.
╢╢& '

Fotografia
╢╢' 1
,
╢╢1 2
Musica
╣╣ 
=
╣╣  
x
╣╣! "
.
╣╣" #
Musica
╣╣# )
,
╣╣) *
Pais
╤╤ 
=
╤╤ 
x
╤╤  
.
╤╤  !
Pais
╤╤! %
,
╤╤% &

Productora
╥╥ "
=
╥╥# $
x
╥╥% &
.
╥╥& '

Productora
╥╥' 1
,
╥╥1 2
Reparto
╦╦ 
=
╦╦  !
x
╦╦" #
.
╦╦# $
Reparto
╦╦$ +
,
╦╦+ ,
Snopsis
╧╧ 
=
╧╧  !
x
╧╧" #
.
╧╧# $
Snopsis
╧╧$ +
,
╧╧+ ,

Categorias
╨╨ "
=
╨╨# $
x
╨╨% &
.
╨╨& '

Categorias
╨╨' 1
.
╨╨1 2
Select
╨╨2 8
(
╨╨8 9
y
╨╨9 :
=>
╨╨; =
new
╨╨> A
CategoriaGridView
╨╨B S
(
╨╨S T
)
╨╨T U
{
╩╩ 
Id
╪╪ 
=
╪╪  
y
╪╪! "
.
╪╪" #
CategoriaId
╪╪# .
,
╪╪. /
Nombre
╫╫ "
=
╫╫# $
y
╫╫% &
.
╫╫& '
	Categoria
╫╫' 0
.
╫╫0 1
Nombre
╫╫1 7
}
╬╬ 
)
╬╬ 
,
╬╬ 
	ImagenUrl
©© !
=
©©" #
x
©©$ %
.
©©% &
	ImagenUrl
©©& /
}
юю 
)
юю 
;
юю 
rh
бб 
.
бб 
Result
бб 
=
бб 
	lstSalida
бб %
;
бб% &
rh
дд 
.
дд 
SetResponse
дд 
(
дд 
true
дд #
,
дд# $
m
дд% &
:
дд& '
$str
дд( ,
,
дд, -
	ErrorCode
дд. 7
:
дд7 8
$num
дд9 <
)
дд< =
;
дд= >
}
фф 
catch
гг 
(
гг 
	Exception
гг 
e
гг 
)
гг 
{
хх 
_logger
ии 
.
ии 
LogError
ии  
(
ии  !
e
ии! "
.
ии" #
Message
ии# *
,
ии* +
e
ии, -
)
ии- .
;
ии. /
rh
йй 
.
йй 
Message
йй 
=
йй 
e
йй 
.
йй 
Message
йй &
;
йй& '
}
кк 
return
мм 
rh
мм 
;
мм 
}
нн 	
public
яя 
ResponseHelper
яя 
<
яя 
DataTableResponse
яя /
<
яя/ 0%
EntretenimientoGridView
яя0 G
>
яяG H
>
яяH I$
PeliculasConPaginacion
яяJ `
(
яя` a
DTParameterModel
яяa q
model
яяr w
)
яяw x
{
рр 	
var
сс 
rh
сс 
=
сс 
new
сс 
ResponseHelper
сс '
<
сс' (
DataTableResponse
сс( 9
<
сс9 :%
EntretenimientoGridView
сс: Q
>
ссQ R
>
ссR S
(
ссS T
)
ссT U
;
ссU V
try
уу 
{
жж 
int
вв "
filteredResultsCount
вв (
;
вв( )
int
ьь 
totalResultsCount
ьь %
;
ьь% &
var
зз 
sortedColumns
зз !
=
зз" #
model
зз$ )
.
зз) *
Columns
зз* 1
;
зз1 2
var
шш 
orderByString
шш !
=
шш" #
String
шш$ *
.
шш* +
Empty
шш+ 0
;
шш0 1
orderByString
щщ 
=
щщ 
(
щщ  !
sortedColumns
щщ! .
[
щщ. /
model
щщ/ 4
.
щщ4 5
Order
щщ5 :
.
щщ: ;
FirstOrDefault
щщ; I
(
щщI J
)
щщJ K
.
щщK L
Column
щщL R
]
щщR S
.
щщS T
Data
щщT X
)
щщX Y
+
щщZ [
(
щщ\ ]
model
щщ] b
.
щщb c
Order
щщc h
.
щщh i
FirstOrDefault
щщi w
(
щщw x
)
щщx y
.
щщy z
Dir
щщz }
==щщ~ ─
$strщщ│ ├
?щщ┤ ┬
$strщщ┴ ▐
:щщ░ ▒
$strщщ▓ ≥
)щщ≥  
;щщ  ⌡
var
ъъ 
data
ъъ 
=
ъъ 
(
ъъ 
_unitOfWork
ъъ '
.
ъъ' ("
_entretenimientoRepo
ъъ( <
.
ъъ< =
GetAll
ъъ= C
(
ъъC D
)
ъъD E
)
ъъE F
.
ЮЮ 
Select
ЮЮ 
(
ЮЮ 
x
ЮЮ 
=>
ЮЮ  
new
ЮЮ! $%
EntretenimientoGridView
ЮЮ% <
{
АА 
Id
ББ 
=
ББ 
x
ББ 
.
ББ 
Id
ББ !
,
ББ! "
Ano
ЦЦ 
=
ЦЦ 
x
ЦЦ 
.
ЦЦ  
Ano
ЦЦ  #
,
ЦЦ# $
Titulo
ДД 
=
ДД  
x
ДД! "
.
ДД" #
Titulo
ДД# )
,
ДД) *
	Direccion
ЕЕ !
=
ЕЕ" #
x
ЕЕ$ %
.
ЕЕ% &
	Direccion
ЕЕ& /
,
ЕЕ/ 0

Fotografia
ФФ "
=
ФФ# $
x
ФФ% &
.
ФФ& '

Fotografia
ФФ' 1
,
ФФ1 2
Musica
ГГ 
=
ГГ  
x
ГГ! "
.
ГГ" #
Musica
ГГ# )
,
ГГ) *
Pais
ХХ 
=
ХХ 
x
ХХ  
.
ХХ  !
Pais
ХХ! %
,
ХХ% &

Productora
ИИ "
=
ИИ# $
x
ИИ% &
.
ИИ& '

Productora
ИИ' 1
,
ИИ1 2
Reparto
ЙЙ 
=
ЙЙ  !
x
ЙЙ" #
.
ЙЙ# $
Reparto
ЙЙ$ +
,
ЙЙ+ ,
Snopsis
КК 
=
КК  !
x
КК" #
.
КК# $
Snopsis
КК$ +
,
КК+ ,

Categorias
ЛЛ "
=
ЛЛ# $
x
ЛЛ% &
.
ЛЛ& '

Categorias
ЛЛ' 1
.
ЛЛ1 2
Select
ЛЛ2 8
(
ЛЛ8 9
y
ЛЛ9 :
=>
ЛЛ; =
new
ЛЛ> A
CategoriaGridView
ЛЛB S
(
ЛЛS T
)
ЛЛT U
{
ММ 
Id
НН 
=
НН  
y
НН! "
.
НН" #
CategoriaId
НН# .
,
НН. /
Nombre
ОО "
=
ОО# $
y
ОО% &
.
ОО& '
	Categoria
ОО' 0
.
ОО0 1
Nombre
ОО1 7
}
ПП 
)
ПП 
,
ПП 
	ImagenUrl
ЯЯ !
=
ЯЯ" #
x
ЯЯ$ %
.
ЯЯ% &
	ImagenUrl
ЯЯ& /
}
РР 
)
РР 
.
СС 
OrderBy
СС 
(
СС 
orderByString
СС *
)
СС* +
.
СС+ ,
AsQueryable
СС, 7
(
СС7 8
)
СС8 9
;
СС9 :
totalResultsCount
УУ !
=
УУ" #
data
УУ$ (
.
УУ( )
Count
УУ) .
(
УУ. /
)
УУ/ 0
;
УУ0 1
if
ВВ 
(
ВВ 
!
ВВ 
String
ВВ 
.
ВВ 
IsNullOrEmpty
ВВ )
(
ВВ) *
model
ВВ* /
.
ВВ/ 0
Search
ВВ0 6
.
ВВ6 7
Value
ВВ7 <
)
ВВ< =
)
ВВ= >
{
ЬЬ 
data
ЫЫ 
=
ЫЫ 
data
ЫЫ 
.
ЫЫ  
Where
ЫЫ  %
(
ЫЫ% &
x
ЫЫ& '
=>
ЫЫ( *
x
ЗЗ 
.
ЗЗ 
Titulo
ЗЗ #
.
ЗЗ# $
ToLower
ЗЗ$ +
(
ЗЗ+ ,
)
ЗЗ, -
.
ЗЗ- .
Contains
ЗЗ. 6
(
ЗЗ6 7
model
ЗЗ7 <
.
ЗЗ< =
Search
ЗЗ= C
.
ЗЗC D
Value
ЗЗD I
.
ЗЗI J
ToLower
ЗЗJ Q
(
ЗЗQ R
)
ЗЗR S
)
ЗЗS T
||
ШШ 
x
ШШ 
.
ШШ 
Titulo
ШШ #
.
ШШ# $
ToLower
ШШ$ +
(
ШШ+ ,
)
ШШ, -
.
ШШ- .
EndsWith
ШШ. 6
(
ШШ6 7
model
ШШ7 <
.
ШШ< =
Search
ШШ= C
.
ШШC D
Value
ШШD I
.
ШШI J
ToLower
ШШJ Q
(
ШШQ R
)
ШШR S
)
ШШS T
||
ЩЩ 
x
ЩЩ 
.
ЩЩ 
Ano
ЩЩ  
.
ЩЩ  !
ToString
ЩЩ! )
(
ЩЩ) *
)
ЩЩ* +
.
ЩЩ+ ,
EndsWith
ЩЩ, 4
(
ЩЩ4 5
model
ЩЩ5 :
.
ЩЩ: ;
Search
ЩЩ; A
.
ЩЩA B
Value
ЩЩB G
.
ЩЩG H
ToLower
ЩЩH O
(
ЩЩO P
)
ЩЩP Q
)
ЩЩQ R
||
ЧЧ 
x
ЧЧ 
.
ЧЧ 
Ano
ЧЧ  
.
ЧЧ  !
ToString
ЧЧ! )
(
ЧЧ) *
)
ЧЧ* +
.
ЧЧ+ ,
EndsWith
ЧЧ, 4
(
ЧЧ4 5
model
ЧЧ5 :
.
ЧЧ: ;
Search
ЧЧ; A
.
ЧЧA B
Value
ЧЧB G
.
ЧЧG H
ToLower
ЧЧH O
(
ЧЧO P
)
ЧЧP Q
)
ЧЧQ R
||
── 
x
── 
.
── 
	Direccion
── &
.
──& '
ToLower
──' .
(
──. /
)
──/ 0
.
──0 1
EndsWith
──1 9
(
──9 :
model
──: ?
.
──? @
Search
──@ F
.
──F G
Value
──G L
.
──L M
ToLower
──M T
(
──T U
)
──U V
)
──V W
||
││ 
x
││ 
.
││ 
	Direccion
││ &
.
││& '
ToLower
││' .
(
││. /
)
││/ 0
.
││0 1
EndsWith
││1 9
(
││9 :
model
││: ?
.
││? @
Search
││@ F
.
││F G
Value
││G L
.
││L M
ToLower
││M T
(
││T U
)
││U V
)
││V W
||
┐┐ 
x
┐┐ 
.
┐┐ 
Pais
┐┐ !
.
┐┐! "
ToLower
┐┐" )
(
┐┐) *
)
┐┐* +
.
┐┐+ ,
EndsWith
┐┐, 4
(
┐┐4 5
model
┐┐5 :
.
┐┐: ;
Search
┐┐; A
.
┐┐A B
Value
┐┐B G
.
┐┐G H
ToLower
┐┐H O
(
┐┐O P
)
┐┐P Q
)
┐┐Q R
||
└└ 
x
└└ 
.
└└ 
Pais
└└ !
.
└└! "
ToLower
└└" )
(
└└) *
)
└└* +
.
└└+ ,
EndsWith
└└, 4
(
└└4 5
model
└└5 :
.
└└: ;
Search
└└; A
.
└└A B
Value
└└B G
.
└└G H
ToLower
└└H O
(
└└O P
)
└└P Q
)
└└Q R
)
┘┘ 
;
┘┘ 
}
├├ "
filteredResultsCount
┬┬ $
=
┬┬% &
data
┬┬' +
.
┬┬+ ,
Count
┬┬, 1
(
┬┬1 2
)
┬┬2 3
;
┬┬3 4
var
┼┼ 
salida
┼┼ 
=
┼┼ 
data
┼┼ !
.
▀▀ 
Skip
▀▀ !
(
▀▀! "
model
▀▀" '
.
▀▀' (
Start
▀▀( -
)
▀▀- .
.
▄▄ 
Take
▄▄ !
(
▄▄! "
model
▄▄" '
.
▄▄' (
Length
▄▄( .
)
▄▄. /
;
▄▄/ 0
rh
▌▌ 
.
▌▌ 
Result
▌▌ 
=
▌▌ 
new
▌▌ 
DataTableResponse
▌▌  1
<
▌▌1 2%
EntretenimientoGridView
▌▌2 I
>
▌▌I J
(
▌▌J K
)
▌▌K L
{
▐▐ 
draw
░░ 
=
░░ 
model
░░  
.
░░  !
Draw
░░! %
,
░░% &
data
▒▒ 
=
▒▒ 
salida
▒▒ !
.
▒▒! "
ToList
▒▒" (
(
▒▒( )
)
▒▒) *
,
▒▒* +
recordsFiltered
▓▓ #
=
▓▓$ %"
filteredResultsCount
▓▓& :
,
▓▓: ;
recordsTotal
⌠⌠  
=
⌠⌠! "
totalResultsCount
⌠⌠# 4
}
■■ 
;
■■ 
rh
∙∙ 
.
∙∙ 
SetResponse
∙∙ 
(
∙∙ 
true
∙∙ #
)
∙∙# $
;
∙∙$ %
}
√√ 
catch
≈≈ 
(
≈≈ 
	Exception
≈≈ 
e
≈≈ 
)
≈≈ 
{
≤≤ 
_logger
≥≥ 
.
≥≥ 
LogError
≥≥  
(
≥≥  !
e
≥≥! "
.
≥≥" #
Message
≥≥# *
,
≥≥* +
e
≥≥, -
)
≥≥- .
;
≥≥. /
rh
   
.
   
SetResponse
   
(
   
false
   $
,
  $ %
m
  & '
:
  ' (
e
  ) *
.
  * +
Message
  + 2
)
  2 3
;
  3 4
}
⌡⌡ 
return
²² 
rh
²² 
;
²² 
}
·· 	
private
║║ 
ResponseHelper
║║ 
Crear
║║ $
(
║║$ % 
frmEntretenimiento
║║% 7
model
║║8 =
)
║║= >
{
╒╒ 	
var
ёё 
rh
ёё 
=
ёё 
new
ёё 
ResponseHelper
ёё '
(
ёё' (
)
ёё( )
;
ёё) *
try
╔╔ 
{
╕╕ 
_unitOfWork
╗╗ 
.
╗╗ 
BeginTransaction
╗╗ ,
(
╗╗, -
)
╗╗- .
;
╗╗. /
var
╙╙  
clsEntretenimiento
╙╙ &
=
╙╙' (
_mapper
╙╙) 0
.
╙╙0 1
Map
╙╙1 4
<
╙╙4 5
Entretenimiento
╙╙5 D
>
╙╙D E
(
╙╙E F
model
╙╙F K
)
╙╙K L
;
╙╙L M
_unitOfWork
╛╛ 
.
╛╛ "
_entretenimientoRepo
╛╛ 0
.
╜╜ 
Add
╜╜ 
(
╜╜  
clsEntretenimiento
╜╜ +
)
╜╜+ ,
;
╜╜, -
_unitOfWork
╞╞ 
.
╞╞ 
Save
╞╞  
(
╞╞  !
)
╞╞! "
;
╞╞" #
var
╠╠ )
lstEntretenimientoCategoria
╠╠ /
=
╠╠0 1
model
╠╠2 7
.
╡╡ 

Categorias
╡╡ 
.
ЁЁ 
Select
ЁЁ 
(
ЁЁ 
x
ЁЁ 
=>
ЁЁ  
new
ЁЁ! $(
EntretenimientosCategorias
ЁЁ% ?
(
ЁЁ? @
)
ЁЁ@ A
{
╢╢ 
CategoriaId
╣╣ #
=
╣╣$ %
x
╣╣& '
.
╣╣' (
Id
╣╣( *
,
╣╣* +
EntretenimientoId
╤╤ )
=
╤╤* + 
clsEntretenimiento
╤╤, >
.
╤╤> ?
Id
╤╤? A
}
╥╥ 
)
╥╥ 
;
╥╥ 
_unitOfWork
╧╧ 
.
╧╧ %
_entretenimientoCatRepo
╧╧ 3
.
╨╨ 
AddRange
╨╨ 
(
╨╨ )
lstEntretenimientoCategoria
╨╨ 9
)
╨╨9 :
;
╨╨: ;
_unitOfWork
╪╪ 
.
╪╪ 
BulkSaveChanges
╪╪ +
(
╪╪+ ,
)
╪╪, -
;
╪╪- .
_unitOfWork
╬╬ 
.
╬╬ 
Commit
╬╬ "
(
╬╬" #
)
╬╬# $
;
╬╬$ %
rh
юю 
.
юю 
SetResponse
юю 
(
юю 
true
юю #
,
юю# $
m
юю% &
:
юю& '
$str
юю( ,
,
юю, -
	ErrorCode
юю. 7
:
юю7 8
$num
юю9 <
,
юю< =
TraId
юю> C
:
ююC D 
clsEntretenimiento
ююE W
.
ююW X
Id
ююX Z
.
ююZ [
ToString
юю[ c
(
ююc d
)
ююd e
)
ююe f
;
ююf g
}
аа 
catch
бб 
(
бб 
	Exception
бб 
e
бб 
)
бб 
{
цц 
_logger
дд 
.
дд 
LogError
дд  
(
дд  !
e
дд! "
.
дд" #
Message
дд# *
,
дд* +
e
дд, -
)
дд- .
;
дд. /
rh
ее 
.
ее 
Message
ее 
=
ее 
e
ее 
.
ее 
Message
ее &
;
ее& '
}
фф 
return
хх 
rh
хх 
;
хх 
}
ии 	
private
лл 
ResponseHelper
лл 

Actualizar
лл )
(
лл) * 
frmEntretenimiento
лл* <
model
лл= B
)
ллB C
{
мм 	
var
нн 
rh
нн 
=
нн 
new
нн 
ResponseHelper
нн '
(
нн' (
)
нн( )
;
нн) *
try
пп 
{
яя 
_unitOfWork
сс 
.
сс 
BeginTransaction
сс ,
(
сс, -
)
сс- .
;
сс. /
var
уу  
clsEntretenimiento
уу &
=
уу' (
_mapper
уу) 0
.
уу0 1
Map
уу1 4
<
уу4 5
Entretenimiento
уу5 D
>
ууD E
(
ууE F
model
ууF K
)
ууK L
;
ууL M
_unitOfWork
вв 
.
вв "
_entretenimientoRepo
вв 0
.
ьь 
Update
ьь 
(
ьь  
clsEntretenimiento
ьь .
,
ьь. /
model
ьь0 5
.
ьь5 6
Id
ьь6 8
)
ьь8 9
;
ьь9 :
_unitOfWork
зз 
.
зз 
Save
зз  
(
зз  !
)
зз! "
;
зз" #
var
щщ *
lstCategoriasEntretenimiento
щщ 0
=
щщ1 2
_unitOfWork
щщ3 >
.
щщ> ?%
_entretenimientoCatRepo
щщ? V
.
чч 
FindBy
чч 
(
чч 
x
чч 
=>
чч  
x
чч! "
.
чч" #
EntretenimientoId
чч# 4
==
чч5 7
model
чч8 =
.
чч= >
Id
чч> @
)
чч@ A
;
ччA B
_unitOfWork
ЮЮ 
.
ЮЮ %
_entretenimientoCatRepo
ЮЮ 3
.
АА 
Delete
АА 
(
АА *
lstCategoriasEntretenimiento
АА 8
)
АА8 9
;
АА9 :
_unitOfWork
ЦЦ 
.
ЦЦ 
Save
ЦЦ  
(
ЦЦ  !
)
ЦЦ! "
;
ЦЦ" #
var
ЕЕ )
lstEntretenimientoCategoria
ЕЕ /
=
ЕЕ0 1
model
ЕЕ2 7
.
ФФ 

Categorias
ФФ 
.
ГГ 
Select
ГГ 
(
ГГ 
x
ГГ 
=>
ГГ  
new
ГГ! $(
EntretenimientosCategorias
ГГ% ?
(
ГГ? @
)
ГГ@ A
{
ХХ 
CategoriaId
ИИ #
=
ИИ$ %
x
ИИ& '
.
ИИ' (
Id
ИИ( *
,
ИИ* +
EntretenimientoId
ЙЙ )
=
ЙЙ* + 
clsEntretenimiento
ЙЙ, >
.
ЙЙ> ?
Id
ЙЙ? A
}
КК 
)
КК 
;
КК 
_unitOfWork
ММ 
.
ММ %
_entretenimientoCatRepo
ММ 3
.
НН 
AddRange
НН 
(
НН )
lstEntretenimientoCategoria
НН 9
)
НН9 :
;
НН: ;
_unitOfWork
ПП 
.
ПП 
Save
ПП  
(
ПП  !
)
ПП! "
;
ПП" #
_unitOfWork
РР 
.
РР 
Commit
РР "
(
РР" #
)
РР# $
;
РР$ %
rh
ТТ 
.
ТТ 
SetResponse
ТТ 
(
ТТ 
true
ТТ #
,
ТТ# $
m
ТТ% &
:
ТТ& '
$str
ТТ( ,
,
ТТ, -
	ErrorCode
ТТ. 7
:
ТТ7 8
$num
ТТ9 <
)
ТТ< =
;
ТТ= >
}
УУ 
catch
ЖЖ 
(
ЖЖ 
	Exception
ЖЖ 
e
ЖЖ 
)
ЖЖ 
{
ВВ 
_logger
ЬЬ 
.
ЬЬ 
LogError
ЬЬ  
(
ЬЬ  !
e
ЬЬ! "
.
ЬЬ" #
Message
ЬЬ# *
,
ЬЬ* +
e
ЬЬ, -
)
ЬЬ- .
;
ЬЬ. /
rh
ЫЫ 
.
ЫЫ 
Message
ЫЫ 
=
ЫЫ 
e
ЫЫ 
.
ЫЫ 
Message
ЫЫ &
;
ЫЫ& '
}
ЗЗ 
return
ЭЭ 
rh
ЭЭ 
;
ЭЭ 
}
ЩЩ 	
}
ЪЪ 
}── Т&
■C:\Users\LuisOsorio\Desktop\Universidad\Semestre II\Pruebas\Proyecto Arquitectura\postgress\src\BusinessLogic\LogicServices\Services\UsersService.cs
	namespace 	
LogicServices
 
. 
Services  
{ 
public 

	interface 
IUsersService "
{ 
Task 
< 
ResponseHelper 
> 
CrearUsuario )
() *
frmRegistro* 5
model6 ;
); <
;< =
} 
public 

class 
UsersService 
: 
IUsersService  -
{ 
private 
readonly 
IUnitOfWork $
_unitOfWork% 0
;0 1
private 
readonly 
IMapper  
_mapper! (
;( )
private 
readonly 
SignInManager &
<& '
ApplicationUser' 6
>6 7
_signInManager8 F
;F G
private 
readonly 
UserManager $
<$ %
ApplicationUser% 4
>4 5
_userManager6 B
;B C
private 
readonly 
ILogger  
_logger! (
;( )
public 
UsersService 
( 
IUnitOfWork 

unitOfWork "
," #
IMapper   
mapper   
,   
UserManager!! 
<!! 
ApplicationUser!! '
>!!' (
userManager!!) 4
,!!4 5
SignInManager"" 
<"" 
ApplicationUser"" )
>"") *
signInManager""+ 8
,""8 9
ILogger## 
<## "
EntretenimientoService## *
>##* +
logger##, 2
)##2 3
{$$ 	
_unitOfWork%% 
=%% 

unitOfWork%% $
;%%$ %
_mapper&& 
=&& 
mapper&& 
;&& 
_userManager'' 
='' 
userManager'' &
;''& '
_signInManager(( 
=(( 
signInManager(( *
;((* +
_logger)) 
=)) 
logger)) 
;)) 
}** 	
public-- 
async-- 
Task-- 
<-- 
ResponseHelper-- (
>--( )
CrearUsuario--* 6
(--6 7
frmRegistro--7 B
model--C H
)--H I
{.. 	
var// 
rh// 
=// 
new// 
ResponseHelper// '
(//' (
)//( )
;//) *
try11 
{22 
var33 
user33 
=33 
new33 
ApplicationUser33 .
{33/ 0
UserName331 9
=33: ;
model33< A
.33A B
Username33B J
,33J K
Email33L Q
=33R S
model33T Y
.33Y Z
Email33Z _
,33_ `
FullName33a i
=33j k
model33l q
.33q r
FullName33r z
}33{ |
;33| }
var44 
result44 
=44 
await44 "
_userManager44# /
.44/ 0
CreateAsync440 ;
(44; <
user44< @
,44@ A
model44B G
.44G H
Password44H P
)44P Q
;44Q R
if66 
(66 
!66 
result66 
.66 
	Succeeded66 %
)66% &
{77 
rh88 
.88 
SetResponse88 "
(88" #
true88# '
,88' (
m88) *
:88* +
$str88, G
,88G H
	ErrorCode88I R
:88R S
$num88T W
,88W X
Errores88Y `
:88` a
result88b h
.88h i
Errors88i o
.88o p
Select88p v
(88v w
x88w x
=>88y {
x88| }
.88} ~
Description	88~ ┴
)
88┴ ┼
.
88┼ ▀
ToList
88▀ ▒
(
88▒ ▓
)
88▓ ⌠
)
88⌠ ■
;
88■ ∙
}99 
else:: 
{;; 
rh<< 
.<< 
SetResponse<< "
(<<" #
true<<# '
,<<' (
m<<) *
:<<* +
$str<<+ E
,<<E F
	ErrorCode<<G P
:<<P Q
$num<<Q T
)<<T U
;<<U V
}== 
}>> 
catch?? 
(?? 
	Exception?? 
e?? 
)?? 
{@@ 
_loggerAA 
.AA 
LogErrorAA  
(AA  !
eAA! "
.AA" #
MessageAA# *
,AA* +
eAA, -
)AA- .
;AA. /
rhBB 
.BB 
MessageBB 
=BB 
eBB 
.BB 
MessageBB &
;BB& '
}CC 
returnDD 
rhDD 
;DD 
}EE 	
}FF 
}GG 