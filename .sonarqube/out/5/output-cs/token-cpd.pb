˙¶
òC:\Users\LuisOsorio\Desktop\Universidad\Semestre II\Pruebas\Proyecto Arquitectura\postgress\src\BusinessLogic\LogicServices\Services\CategoriaService.cs
	namespace 	
LogicServices
 
. 
Services  
{ 
public 

	interface 
ICategoriaService &
{ 
ResponseHelper 
< 
IEnumerable "
<" #
CategoriaGridView# 4
>4 5
>5 6
Todas7 <
(< =
)= >
;> ?
ResponseHelper 
< 
CategoriaGridView (
>( )
CategoriaPorId* 8
(8 9
Guid9 =
Id> @
)@ A
;A B
Task## 
<## 
bool## 
>## 
ExisteCategoria## "
(##" #
Guid### '
Id##( *
,##* +
string##, 2
Nombre##3 9
)##9 :
;##: ;
Task++ 
<++ 
ResponseHelper++ 
>++ 
CrearActualizar++ ,
(++, -
frmCategoria++- 9
frm++: =
)++= >
;++> ?
Task33 
<33 
ResponseHelper33 
>33 
ExisteCategoriaId33 .
(33. /
Guid33/ 3
CategoriaId334 ?
)33? @
;33@ A
ResponseHelper;; 
<;; 
DataTableResponse;; (
<;;( )
CategoriaGridView;;) :
>;;: ;
>;;; <#
CategoriasConPaginacion;;= T
(;;T U
DTParameterModel;;U e
model;;f k
);;k l
;;;l m
}>> 
public?? 

class?? 
CategoriaService?? !
:??" #
ICategoriaService??$ 5
{@@ 
privateAA 
readonlyAA 
IUnitOfWorkAA $
_unitOfWorkAA% 0
;AA0 1
privateBB 
readonlyBB 
IMapperBB  
_mapperBB! (
;BB( )
privateCC 
readonlyCC 
ILoggerCC  
_loggerCC! (
;CC( )
publicEE 
CategoriaServiceEE 
(EE  
IUnitOfWorkFF 

unitOfWorkFF "
,FF" #
IMapperGG 
mapperGG 
,GG 
ILoggerHH 
<HH 
CategoriaServiceHH $
>HH$ %
loggerHH& ,
)HH, -
{II 	
_unitOfWorkJJ 
=JJ 

unitOfWorkJJ $
;JJ$ %
_mapperKK 
=KK 
mapperKK 
;KK 
_loggerLL 
=LL 
loggerLL 
;LL 
}MM 	
publicQQ 
ResponseHelperQQ 
<QQ 
IEnumerableQQ )
<QQ) *
CategoriaGridViewQQ* ;
>QQ; <
>QQ< =
TodasQQ> C
(QQC D
)QQD E
{RR 	
varSS 
rhSS 
=SS 
newSS 
ResponseHelperSS '
<SS' (
IEnumerableSS( 3
<SS3 4
CategoriaGridViewSS4 E
>SSE F
>SSF G
(SSG H
)SSH I
;SSI J
tryUU 
{VV 
varWW 
lstCategoriasWW !
=WW" #
_unitOfWorkWW$ /
.WW/ 0
_categoriaRepoWW0 >
.WW> ?
GetAllWW? E
(WWE F
)WWF G
;WWG H
rhYY 
.YY 
ResultYY 
=YY 
_mapperYY #
.YY# $
MapYY$ '
<YY' (
IEnumerableYY( 3
<YY3 4
CategoriaGridViewYY4 E
>YYE F
>YYF G
(YYG H
lstCategoriasYYH U
)YYU V
;YYV W
rh[[ 
.[[ 
SetResponse[[ 
([[ 
true[[ #
,[[# $
m[[% &
:[[& '
$str[[( ,
,[[, -
	ErrorCode[[. 7
:[[7 8
$num[[9 <
)[[< =
;[[= >
}\\ 
catch]] 
(]] 
	Exception]] 
e]] 
)]] 
{^^ 
_logger__ 
.__ 
LogError__  
(__  !
e__! "
.__" #
Message__# *
,__* +
e__, -
)__- .
;__. /
rh`` 
.`` 
Message`` 
=`` 
e`` 
.`` 
Message`` &
;``& '
}aa 
returncc 
rhcc 
;cc 
}dd 	
publicgg 
ResponseHelpergg 
<gg 
CategoriaGridViewgg /
>gg/ 0
CategoriaPorIdgg1 ?
(gg? @
Guidgg@ D
IdggE G
)ggG H
{hh 	
varii 
rhii 
=ii 
newii 
ResponseHelperii '
<ii' (
CategoriaGridViewii( 9
>ii9 :
(ii: ;
)ii; <
;ii< =
trykk 
{ll 
varmm 
dbCategoriamm 
=mm  !
_unitOfWorkmm" -
.nn 
_categoriaReponn #
.oo 
Findoo 
(oo 
xoo 
=>oo 
xoo 
.oo 
Idoo !
==oo" $
Idoo% '
)oo' (
;oo( )
varqq 
resultqq 
=qq 
_mapperqq $
.qq$ %
Mapqq% (
<qq( )
CategoriaGridViewqq) :
>qq: ;
(qq; <
dbCategoriaqq< G
)qqG H
;qqH I
rhss 
.ss 
Resultss 
=ss 
resultss "
;ss" #
rhuu 
.uu 
SetResponseuu 
(uu 
trueuu #
,uu# $
muu% &
:uu& '
$struu( ,
,uu, -
	ErrorCodeuu. 7
:uu7 8
resultuu9 ?
!=uu@ B
nulluuC G
?uuH I
$numuuJ M
:uuN O
$numuuP S
)uuS T
;uuT U
}vv 
catchww 
(ww 
	Exceptionww 
eww 
)ww 
{xx 
_loggeryy 
.yy 
LogErroryy  
(yy  !
eyy! "
.yy" #
Messageyy# *
,yy* +
eyy, -
)yy- .
;yy. /
}zz 
return|| 
rh|| 
;|| 
}}} 	
public
ÄÄ 
async
ÄÄ 
Task
ÄÄ 
<
ÄÄ 
bool
ÄÄ 
>
ÄÄ 
ExisteCategoria
ÄÄ  /
(
ÄÄ/ 0
Guid
ÄÄ0 4
Id
ÄÄ5 7
,
ÄÄ7 8
string
ÄÄ9 ?
Nombre
ÄÄ@ F
)
ÄÄF G
{
ÅÅ 	
var
ÉÉ 
dato
ÉÉ 
=
ÉÉ 
await
ÉÉ 
_unitOfWork
ÉÉ (
.
ÉÉ( )
_categoriaRepo
ÉÉ) 7
.
ÑÑ 
	FindAsync
ÑÑ 
(
ÑÑ 
x
ÑÑ 
=>
ÑÑ 
x
ÑÑ  !
.
ÑÑ! "
Nombre
ÑÑ" (
.
ÑÑ( )
ToLower
ÑÑ) 0
(
ÑÑ0 1
)
ÑÑ1 2
==
ÑÑ3 5
Nombre
ÑÑ6 <
.
ÑÑ< =
ToLower
ÑÑ= D
(
ÑÑD E
)
ÑÑE F
)
ÑÑF G
;
ÑÑG H
if
ÜÜ 
(
ÜÜ 
dato
ÜÜ 
!=
ÜÜ 
null
ÜÜ 
)
ÜÜ 
{
áá 
if
àà 
(
àà 
dato
àà 
.
àà 
Id
àà 
==
àà 
Id
àà !
)
àà! "
{
ââ 
return
ää 
true
ää 
;
ää  
}
ãã 
else
åå 
{
çç 
return
éé 
false
éé  
;
éé  !
}
èè 
}
êê 
else
ëë 
{
íí 
return
ìì 
true
ìì 
;
ìì 
}
îî 
}
ññ 	
public
òò 
async
òò 
Task
òò 
<
òò 
ResponseHelper
òò (
>
òò( )
CrearActualizar
òò* 9
(
òò9 :
frmCategoria
òò: F
frm
òòG J
)
òòJ K
{
ôô 	
if
öö 
(
öö 
frm
öö 
.
öö 
Id
öö 
.
öö 
ToString
öö 
(
öö 
)
öö  
==
öö! #
$str
öö$ J
)
ööJ K
{
õõ 
return
úú 
await
úú 
Crear
úú "
(
úú" #
frm
úú# &
)
úú& '
;
úú' (
}
ùù 
else
ûû 
{
üü 
return
†† 
await
†† 

Actualizar
†† '
(
††' (
frm
††( +
)
††+ ,
;
††, -
}
°° 
}
¢¢ 	
public
¶¶ 
async
¶¶ 
Task
¶¶ 
<
¶¶ 
ResponseHelper
¶¶ (
>
¶¶( )
ExisteCategoriaId
¶¶* ;
(
¶¶; <
Guid
¶¶< @
CategoriaId
¶¶A L
)
¶¶L M
{
ßß 	
var
®® 
rh
®® 
=
®® 
new
®® 
ResponseHelper
®® '
(
®®' (
)
®®( )
;
®®) *
try
™™ 
{
´´ 
var
≠≠ 
clsCategoria
≠≠  
=
≠≠! "
await
≠≠# (
_unitOfWork
≠≠) 4
.
ÆÆ 
_categoriaRepo
ÆÆ #
.
ØØ 
	FindAsync
ØØ 
(
ØØ 
x
ØØ  
=>
ØØ! #
x
ØØ$ %
.
ØØ% &
Id
ØØ& (
==
ØØ) +
CategoriaId
ØØ, 7
)
ØØ7 8
;
ØØ8 9
rh
≤≤ 
.
≤≤ 
SetResponse
≤≤ 
(
≤≤ 
clsCategoria
≤≤ +
!=
≤≤, .
null
≤≤/ 3
?
≤≤4 5
true
≤≤6 :
:
≤≤; <
false
≤≤= B
,
≤≤B C
m
≤≤D E
:
≤≤E F
$str
≤≤G K
,
≤≤K L
	ErrorCode
≤≤M V
:
≤≤V W
$num
≤≤X [
)
≤≤[ \
;
≤≤\ ]
}
≥≥ 
catch
¥¥ 
(
¥¥ 
	Exception
¥¥ 
e
¥¥ 
)
¥¥ 
{
µµ 
_logger
∂∂ 
.
∂∂ 
LogError
∂∂  
(
∂∂  !
e
∂∂! "
.
∂∂" #
Message
∂∂# *
,
∂∂* +
e
∂∂, -
)
∂∂- .
;
∂∂. /
rh
∑∑ 
.
∑∑ 
Message
∑∑ 
=
∑∑ 
e
∑∑ 
.
∑∑ 
Message
∑∑ &
;
∑∑& '
}
∏∏ 
return
∫∫ 
rh
∫∫ 
;
∫∫ 
}
ªª 	
public
ææ 
ResponseHelper
ææ 
<
ææ 
DataTableResponse
ææ /
<
ææ/ 0
CategoriaGridView
ææ0 A
>
ææA B
>
ææB C%
CategoriasConPaginacion
ææD [
(
ææ[ \
DTParameterModel
ææ\ l
model
ææm r
)
æær s
{
øø 	
var
¿¿ 
rh
¿¿ 
=
¿¿ 
new
¿¿ 
ResponseHelper
¿¿ '
<
¿¿' (
DataTableResponse
¿¿( 9
<
¿¿9 :
CategoriaGridView
¿¿: K
>
¿¿K L
>
¿¿L M
(
¿¿M N
)
¿¿N O
;
¿¿O P
try
¬¬ 
{
√√ 
int
ƒƒ "
filteredResultsCount
ƒƒ (
;
ƒƒ( )
int
≈≈ 
totalResultsCount
≈≈ %
;
≈≈% &
var
«« 
sortedColumns
«« !
=
««" #
model
««$ )
.
««) *
Columns
««* 1
;
««1 2
var
»» 
orderByString
»» !
=
»»" #
String
»»$ *
.
»»* +
Empty
»»+ 0
;
»»0 1
orderByString
   
=
   
(
    !
sortedColumns
  ! .
[
  . /
model
  / 4
.
  4 5
Order
  5 :
.
  : ;
FirstOrDefault
  ; I
(
  I J
)
  J K
.
  K L
Column
  L R
]
  R S
.
  S T
Data
  T X
)
  X Y
+
  Z [
(
  \ ]
model
  ] b
.
  b c
Order
  c h
.
  h i
FirstOrDefault
  i w
(
  w x
)
  x y
.
  y z
Dir
  z }
==  ~ Ä
$str  Å Ü
?  á à
$str  â è
:  ê ë
$str  í ô
)  ô ö
;  ö õ
var
ÃÃ 
data
ÃÃ 
=
ÃÃ 
(
ÃÃ 
_unitOfWork
ÃÃ '
.
ÃÃ' (
_categoriaRepo
ÃÃ( 6
.
ÃÃ6 7
GetAll
ÃÃ7 =
(
ÃÃ= >
)
ÃÃ> ?
)
ÃÃ? @
.
ÕÕ 
Select
ÕÕ 
(
ÕÕ 
x
ÕÕ 
=>
ÕÕ  
new
ÕÕ! $
CategoriaGridView
ÕÕ% 6
(
ÕÕ6 7
)
ÕÕ7 8
{
ŒŒ 
Id
œœ 
=
œœ 
x
œœ 
.
œœ 
Id
œœ !
,
œœ! "
Nombre
–– 
=
––  
x
––! "
.
––" #
Nombre
––# )
}
—— 
)
—— 
.
““ 
OrderBy
““ 
(
““ 
orderByString
““ *
)
““* +
.
““+ ,
AsQueryable
““, 7
(
““7 8
)
““8 9
;
““9 :
totalResultsCount
‘‘ !
=
‘‘" #
data
‘‘$ (
.
‘‘( )
Count
‘‘) .
(
‘‘. /
)
‘‘/ 0
;
‘‘0 1
if
÷÷ 
(
÷÷ 
!
÷÷ 
String
÷÷ 
.
÷÷ 
IsNullOrEmpty
÷÷ )
(
÷÷) *
model
÷÷* /
.
÷÷/ 0
Search
÷÷0 6
.
÷÷6 7
Value
÷÷7 <
)
÷÷< =
)
÷÷= >
{
◊◊ 
data
ÿÿ 
=
ÿÿ 
data
ÿÿ 
.
ÿÿ  
Where
ÿÿ  %
(
ÿÿ% &
x
ÿÿ& '
=>
ÿÿ( *
x
ŸŸ 
.
ŸŸ 
Nombre
ŸŸ #
.
ŸŸ# $
Contains
ŸŸ$ ,
(
ŸŸ, -
model
ŸŸ- 2
.
ŸŸ2 3
Search
ŸŸ3 9
.
ŸŸ9 :
Value
ŸŸ: ?
)
ŸŸ? @
||
⁄⁄ 
x
⁄⁄ 
.
⁄⁄ 
Nombre
⁄⁄ #
.
⁄⁄# $
EndsWith
⁄⁄$ ,
(
⁄⁄, -
model
⁄⁄- 2
.
⁄⁄2 3
Search
⁄⁄3 9
.
⁄⁄9 :
Value
⁄⁄: ?
)
⁄⁄? @
)
€€ 
;
€€ 
}
‹‹ "
filteredResultsCount
ﬁﬁ $
=
ﬁﬁ% &
data
ﬁﬁ' +
.
ﬁﬁ+ ,
Count
ﬁﬁ, 1
(
ﬁﬁ1 2
)
ﬁﬁ2 3
;
ﬁﬁ3 4
var
‡‡ 
salida
‡‡ 
=
‡‡ 
data
‡‡ !
.
·· 
Skip
·· !
(
··! "
model
··" '
.
··' (
Start
··( -
)
··- .
.
‚‚ 
Take
‚‚ !
(
‚‚! "
model
‚‚" '
.
‚‚' (
Length
‚‚( .
)
‚‚. /
;
‚‚/ 0
rh
‰‰ 
.
‰‰ 
Result
‰‰ 
=
‰‰ 
new
‰‰ 
DataTableResponse
‰‰  1
<
‰‰1 2
CategoriaGridView
‰‰2 C
>
‰‰C D
(
‰‰D E
)
‰‰E F
{
ÂÂ 
draw
ÊÊ 
=
ÊÊ 
model
ÊÊ  
.
ÊÊ  !
Draw
ÊÊ! %
,
ÊÊ% &
data
ÁÁ 
=
ÁÁ 
salida
ÁÁ !
.
ÁÁ! "
ToList
ÁÁ" (
(
ÁÁ( )
)
ÁÁ) *
,
ÁÁ* +
recordsFiltered
ËË #
=
ËË$ %"
filteredResultsCount
ËË& :
,
ËË: ;
recordsTotal
ÈÈ  
=
ÈÈ! "
totalResultsCount
ÈÈ# 4
}
ÍÍ 
;
ÍÍ 
rh
ÎÎ 
.
ÎÎ 
SetResponse
ÎÎ 
(
ÎÎ 
true
ÎÎ #
)
ÎÎ# $
;
ÎÎ$ %
}
ÏÏ 
catch
ÌÌ 
(
ÌÌ 
	Exception
ÌÌ 
e
ÌÌ 
)
ÌÌ 
{
ÓÓ 
_logger
ÔÔ 
.
ÔÔ 
LogError
ÔÔ  
(
ÔÔ  !
e
ÔÔ! "
.
ÔÔ" #
Message
ÔÔ# *
,
ÔÔ* +
e
ÔÔ, -
)
ÔÔ- .
;
ÔÔ. /
rh
 
.
 
SetResponse
 
(
 
false
 $
,
$ %
m
& '
:
' (
e
) *
.
* +
Message
+ 2
)
2 3
;
3 4
}
ÒÒ 
return
ÛÛ 
rh
ÛÛ 
;
ÛÛ 
}
ÙÙ 	
private
˜˜ 
async
˜˜ 
Task
˜˜ 
<
˜˜ 
ResponseHelper
˜˜ )
>
˜˜) *
Crear
˜˜+ 0
(
˜˜0 1
frmCategoria
˜˜1 =
frm
˜˜> A
)
˜˜A B
{
¯¯ 	
var
˘˘ 
rh
˘˘ 
=
˘˘ 
new
˘˘ 
ResponseHelper
˘˘ '
(
˘˘' (
)
˘˘( )
;
˘˘) *
try
˚˚ 
{
¸¸ 
await
˝˝ 
_unitOfWork
˝˝ !
.
˝˝! "#
BeginTransactionAsync
˝˝" 7
(
˝˝7 8
)
˝˝8 9
;
˝˝9 :
var
ˇˇ 
model
ˇˇ 
=
ˇˇ 
_mapper
ˇˇ #
.
ˇˇ# $
Map
ˇˇ$ '
<
ˇˇ' (
	Categoria
ˇˇ( 1
>
ˇˇ1 2
(
ˇˇ2 3
frm
ˇˇ3 6
)
ˇˇ6 7
;
ˇˇ7 8
await
ÅÅ 
_unitOfWork
ÅÅ !
.
ÅÅ! "
_categoriaRepo
ÅÅ" 0
.
ÅÅ0 1
AddAsync
ÅÅ1 9
(
ÅÅ9 :
model
ÅÅ: ?
)
ÅÅ? @
;
ÅÅ@ A
await
ÉÉ 
_unitOfWork
ÉÉ !
.
ÉÉ! "
	SaveAsync
ÉÉ" +
(
ÉÉ+ ,
)
ÉÉ, -
;
ÉÉ- .
_unitOfWork
ÖÖ 
.
ÖÖ 
Commit
ÖÖ "
(
ÖÖ" #
)
ÖÖ# $
;
ÖÖ$ %
rh
áá 
.
áá 
SetResponse
áá 
(
áá 
true
áá #
,
áá# $
m
áá% &
:
áá& '
$str
áá( ,
,
áá, -
TraId
áá. 3
:
áá3 4
model
áá5 :
.
áá: ;
Id
áá; =
.
áá= >
ToString
áá> F
(
ááF G
)
ááG H
,
ááH I
	ErrorCode
ááJ S
:
ááS T
$num
ááU X
)
ááX Y
;
ááY Z
}
àà 
catch
ââ 
(
ââ 
	Exception
ââ 
e
ââ 
)
ââ 
{
ää 
_logger
ãã 
.
ãã 
LogError
ãã  
(
ãã  !
e
ãã! "
.
ãã" #
Message
ãã# *
,
ãã* +
e
ãã, -
)
ãã- .
;
ãã. /
rh
åå 
.
åå 
Message
åå 
=
åå 
e
åå 
.
åå 
Message
åå &
;
åå& '
}
çç 
return
èè 
rh
èè 
;
èè 
}
êê 	
private
íí 
async
íí 
Task
íí 
<
íí 
ResponseHelper
íí )
>
íí) *

Actualizar
íí+ 5
(
íí5 6
frmCategoria
íí6 B
frm
ííC F
)
ííF G
{
ìì 	
var
îî 
rh
îî 
=
îî 
new
îî 
ResponseHelper
îî '
(
îî' (
)
îî( )
;
îî) *
try
ññ 
{
óó 
await
òò 
_unitOfWork
òò !
.
òò! "#
BeginTransactionAsync
òò" 7
(
òò7 8
)
òò8 9
;
òò9 :
var
öö 
modelCategoria
öö "
=
öö# $
await
öö% *
_unitOfWork
öö+ 6
.
öö6 7
_categoriaRepo
öö7 E
.
ööE F
	FindAsync
ööF O
(
ööO P
x
ööP Q
=>
ööR T
x
ööU V
.
ööV W
Id
ööW Y
==
ööZ \
frm
öö] `
.
öö` a
Id
ööa c
)
ööc d
;
ööd e
modelCategoria
úú 
.
úú 
Nombre
úú %
=
úú& '
frm
úú( +
.
úú+ ,
Nombre
úú, 2
;
úú2 3
await
ûû 
_unitOfWork
ûû !
.
ûû! "
_categoriaRepo
ûû" 0
.
ûû0 1
UpdateAsync
ûû1 <
(
ûû< =
modelCategoria
ûû= K
,
ûûK L
frm
ûûM P
.
ûûP Q
Id
ûûQ S
)
ûûS T
;
ûûT U
await
†† 
_unitOfWork
†† !
.
††! "
	SaveAsync
††" +
(
††+ ,
)
††, -
;
††- .
_unitOfWork
¢¢ 
.
¢¢ 
Commit
¢¢ "
(
¢¢" #
)
¢¢# $
;
¢¢$ %
rh
§§ 
.
§§ 
SetResponse
§§ 
(
§§ 
true
§§ #
,
§§# $
m
§§% &
:
§§& '
$str
§§( ,
,
§§, -
TraId
§§. 3
:
§§3 4
modelCategoria
§§5 C
.
§§C D
Id
§§D F
.
§§F G
ToString
§§G O
(
§§O P
)
§§P Q
,
§§Q R
	ErrorCode
§§S \
:
§§\ ]
$num
§§^ a
)
§§a b
;
§§b c
}
•• 
catch
¶¶ 
(
¶¶ 
	Exception
¶¶ 
e
¶¶ 
)
¶¶ 
{
ßß 
_logger
®® 
.
®® 
LogError
®®  
(
®®  !
e
®®! "
.
®®" #
Message
®®# *
,
®®* +
e
®®, -
)
®®- .
;
®®. /
rh
©© 
.
©© 
Message
©© 
=
©© 
e
©© 
.
©© 
Message
©© &
;
©©& '
}
™™ 
return
¨¨ 
rh
¨¨ 
;
¨¨ 
}
≠≠ 	
}
ÆÆ 
}ØØ ⁄¬
ûC:\Users\LuisOsorio\Desktop\Universidad\Semestre II\Pruebas\Proyecto Arquitectura\postgress\src\BusinessLogic\LogicServices\Services\EntretenimientoService.cs
	namespace 	
LogicServices
 
. 
Services  
{ 
public 

	interface #
IEntretenimientoService ,
{ 
ResponseHelper 
< 
IEnumerable "
<" ##
EntretenimientoGridView# :
>: ;
>; <
Todas= B
(B C
)C D
;D E
ResponseHelper 
< 
IEnumerable "
<" ##
EntretenimientoGridView# :
>: ;
>; <
InfiniteScroll= K
(K L$
frmEntretenimientoScrollL d
modele j
)j k
;k l
ResponseHelper&& 
<&& #
EntretenimientoGridView&& .
>&&. /
	BuscarUna&&0 9
(&&9 :
Guid&&: >
Id&&? A
)&&A B
;&&B C
Task// 
<// 
bool// 
>// !
ExisteEntretenimiento// (
(//( )
Guid//) -
Id//. 0
,//0 1
string//2 8
Titulo//9 ?
)//? @
;//@ A
ResponseHelper77 
CrearActualizar77 &
(77& '
frmEntretenimiento77' 9
frm77: =
)77= >
;77> ?
ResponseHelper?? 
<?? 
IEnumerable?? "
<??" ##
EntretenimientoGridView??# :
>??: ;
>??; <
PorCategoria??= I
(??I J
Guid??J N
???N O
gCategoriaId??P \
)??\ ]
;??] ^
ResponseHelperGG 
<GG 
DataTableResponseGG (
<GG( )#
EntretenimientoGridViewGG) @
>GG@ A
>GGA B"
PeliculasConPaginacionGGC Y
(GGY Z
DTParameterModelGGZ j
modelGGk p
)GGp q
;GGq r
}II 
publicJJ 

classJJ "
EntretenimientoServiceJJ '
:JJ( )#
IEntretenimientoServiceJJ* A
{KK 
privateLL 
readonlyLL 
IUnitOfWorkLL $
_unitOfWorkLL% 0
;LL0 1
privateMM 
readonlyMM 
IMapperMM  
_mapperMM! (
;MM( )
privateNN 
readonlyNN 
ILoggerNN  
_loggerNN! (
;NN( )
publicPP "
EntretenimientoServicePP %
(PP% &
IUnitOfWorkQQ 

unitOfWorkQQ "
,QQ" #
IMapperRR 
mapperRR 
,RR 
ILoggerSS 
<SS "
EntretenimientoServiceSS *
>SS* +
loggerSS, 2
)SS2 3
{TT 	
_unitOfWorkUU 
=UU 

unitOfWorkUU $
;UU$ %
_mapperVV 
=VV 
mapperVV 
;VV 
_loggerWW 
=WW 
loggerWW 
;WW 
}XX 	
publicZZ 
asyncZZ 
TaskZZ 
<ZZ 
boolZZ 
>ZZ !
ExisteEntretenimientoZZ  5
(ZZ5 6
GuidZZ6 :
IdZZ; =
,ZZ= >
stringZZ? E
TituloZZF L
)ZZL M
{[[ 	
var]] 
dato]] 
=]] 
await]] 
_unitOfWork]] (
.]]( ) 
_entretenimientoRepo]]) =
.^^ 
	FindAsync^^ 
(^^ 
x^^ 
=>^^ 
x^^  !
.^^! "
Titulo^^" (
.^^( )
ToLower^^) 0
(^^0 1
)^^1 2
==^^3 5
Titulo^^6 <
.^^< =
ToLower^^= D
(^^D E
)^^E F
)^^F G
;^^G H
if`` 
(`` 
dato`` 
!=`` 
null`` 
)`` 
{aa 
ifbb 
(bb 
datobb 
.bb 
Idbb 
==bb 
Idbb !
)bb! "
{cc 
returndd 
truedd 
;dd  
}ee 
elseff 
{gg 
returnhh 
falsehh  
;hh  !
}ii 
}jj 
elsekk 
{ll 
returnmm 
truemm 
;mm 
}nn 
}pp 	
publicss 
ResponseHelperss 
<ss 
IEnumerabless )
<ss) *#
EntretenimientoGridViewss* A
>ssA B
>ssB C
TodasssD I
(ssI J
)ssJ K
{tt 	
varuu 
rhuu 
=uu 
newuu 
ResponseHelperuu '
<uu' (
IEnumerableuu( 3
<uu3 4#
EntretenimientoGridViewuu4 K
>uuK L
>uuL M
(uuM N
)uuN O
;uuO P
tryww 
{xx 
varyy 
lstEntrenimientosyy %
=yy& '
(yy( )
_unitOfWorkyy) 4
.zz  
_entretenimientoRepozz )
.{{ 
GetAll{{ 
({{ 
){{ 
){{ 
;{{ 
var}} 
	lstSalida}} 
=}} 
lstEntrenimientos}}  1
.~~ 
AsQueryable~~  
(~~  !
)~~! "
. 
Select 
( 
x 
=>  
new! $#
EntretenimientoGridView% <
{
ÄÄ 
Id
ÅÅ 
=
ÅÅ 
x
ÅÅ 
.
ÅÅ 
Id
ÅÅ !
,
ÅÅ! "
Ano
ÇÇ 
=
ÇÇ 
x
ÇÇ 
.
ÇÇ  
Ano
ÇÇ  #
,
ÇÇ# $
Titulo
ÉÉ 
=
ÉÉ  
x
ÉÉ! "
.
ÉÉ" #
Titulo
ÉÉ# )
,
ÉÉ) *
	Direccion
ÑÑ !
=
ÑÑ" #
x
ÑÑ$ %
.
ÑÑ% &
	Direccion
ÑÑ& /
,
ÑÑ/ 0

Fotografia
ÖÖ "
=
ÖÖ# $
x
ÖÖ% &
.
ÖÖ& '

Fotografia
ÖÖ' 1
,
ÖÖ1 2
Musica
ÜÜ 
=
ÜÜ  
x
ÜÜ! "
.
ÜÜ" #
Musica
ÜÜ# )
,
ÜÜ) *
Pais
áá 
=
áá 
x
áá  
.
áá  !
Pais
áá! %
,
áá% &

Productora
àà "
=
àà# $
x
àà% &
.
àà& '

Productora
àà' 1
,
àà1 2
Reparto
ââ 
=
ââ  !
x
ââ" #
.
ââ# $
Reparto
ââ$ +
,
ââ+ ,
Snopsis
ää 
=
ää  !
x
ää" #
.
ää# $
Snopsis
ää$ +
,
ää+ ,

Categorias
ãã "
=
ãã# $
x
ãã% &
.
ãã& '

Categorias
ãã' 1
.
ãã1 2
Select
ãã2 8
(
ãã8 9
y
ãã9 :
=>
ãã; =
new
ãã> A
CategoriaGridView
ããB S
(
ããS T
)
ããT U
{
ããV W
Id
åå 
=
åå  
y
åå! "
.
åå" #
CategoriaId
åå# .
,
åå. /
Nombre
çç "
=
çç# $
y
çç% &
.
çç& '
	Categoria
çç' 0
.
çç0 1
Nombre
çç1 7
}
éé 
)
éé 
,
éé 
	ImagenUrl
èè !
=
èè" #
x
èè$ %
.
èè% &
	ImagenUrl
èè& /
}
êê 
)
êê 
;
êê 
rh
íí 
.
íí 
Result
íí 
=
íí 
	lstSalida
íí %
;
íí% &
rh
îî 
.
îî 
SetResponse
îî 
(
îî 
true
îî #
,
îî# $
m
îî% &
:
îî& '
$str
îî( ,
,
îî, -
	ErrorCode
îî. 7
:
îî7 8
$num
îî9 <
)
îî< =
;
îî= >
}
ññ 
catch
óó 
(
óó 
	Exception
óó 
e
óó 
)
óó 
{
òò 
_logger
ôô 
.
ôô 
LogError
ôô  
(
ôô  !
e
ôô! "
.
ôô" #
Message
ôô# *
,
ôô* +
e
ôô, -
)
ôô- .
;
ôô. /
rh
öö 
.
öö 
Message
öö 
=
öö 
e
öö 
.
öö 
Message
öö &
;
öö& '
}
õõ 
return
ùù 
rh
ùù 
;
ùù 
}
ûû 	
public
†† 
ResponseHelper
†† 
<
†† 
IEnumerable
†† )
<
††) *%
EntretenimientoGridView
††* A
>
††A B
>
††B C
InfiniteScroll
††D R
(
††R S&
frmEntretenimientoScroll
††S k
model
††l q
)
††q r
{
°° 	
var
¢¢ 
rh
¢¢ 
=
¢¢ 
new
¢¢ 
ResponseHelper
¢¢ '
<
¢¢' (
IEnumerable
¢¢( 3
<
¢¢3 4%
EntretenimientoGridView
¢¢4 K
>
¢¢K L
>
¢¢L M
(
¢¢M N
)
¢¢N O
;
¢¢O P
try
§§ 
{
•• 
Console
¶¶ 
.
¶¶ 
	WriteLine
¶¶ !
(
¶¶! "
JsonConvert
¶¶" -
.
¶¶- .
SerializeObject
¶¶. =
(
¶¶= >
model
¶¶> C
)
¶¶C D
)
¶¶D E
;
¶¶E F
var
ßß 
lstEntrenimientos
ßß %
=
ßß& '
(
ßß( )
_unitOfWork
ßß) 4
.
®® "
_entretenimientoRepo
®® )
.
©© 
GetAll
©© 
(
©© 
)
©© 
)
©© 
;
©© 
if
´´ 
(
´´ 
model
´´ 
.
´´ 
	categoria
´´ "
!=
´´# %
null
´´& *
)
´´* +
{
¨¨ 
var
≠≠ "
lstEntrePorCategoria
≠≠ ,
=
≠≠- .
_unitOfWork
≠≠/ :
.
ÆÆ %
_entretenimientoCatRepo
ÆÆ 0
.
ØØ 
FindAll
ØØ  
(
ØØ  !
x
ØØ! "
=>
ØØ# %
x
ØØ& '
.
ØØ' (
CategoriaId
ØØ( 3
==
ØØ4 6
model
ØØ7 <
.
ØØ< =
	categoria
ØØ= F
)
ØØF G
.
∞∞ 
Select
∞∞ 
(
∞∞  
x
∞∞  !
=>
∞∞" $
x
∞∞% &
.
∞∞& '
EntretenimientoId
∞∞' 8
)
∞∞8 9
;
∞∞9 :
lstEntrenimientos
≤≤ %
=
≤≤& '
lstEntrenimientos
≤≤( 9
.
≥≥ 
Where
≥≥ 
(
≥≥ 
x
≥≥  
=>
≥≥! #"
lstEntrePorCategoria
≥≥$ 8
.
≥≥8 9
Contains
≥≥9 A
(
≥≥A B
x
≥≥B C
.
≥≥C D
Id
≥≥D F
)
≥≥F G
)
≥≥G H
;
≥≥H I
}
¥¥ 
var
∂∂ 
	lstSalida
∂∂ 
=
∂∂ 
lstEntrenimientos
∂∂  1
.
∑∑ 
AsQueryable
∑∑  
(
∑∑  !
)
∑∑! "
.
∏∏ 
OrderBy
∏∏ 
(
∏∏ 
x
∏∏ 
=>
∏∏  
x
∏∏  !
.
∏∏! "
	CreatedAt
∏∏" +
)
∏∏+ ,
.
ππ 
Select
ππ 
(
ππ 
x
ππ 
=>
ππ  
new
ππ! $%
EntretenimientoGridView
ππ% <
{
∫∫ 
Id
ªª 
=
ªª 
x
ªª 
.
ªª 
Id
ªª !
,
ªª! "
Ano
ºº 
=
ºº 
x
ºº 
.
ºº  
Ano
ºº  #
,
ºº# $
Titulo
ΩΩ 
=
ΩΩ  
x
ΩΩ! "
.
ΩΩ" #
Titulo
ΩΩ# )
,
ΩΩ) *
	Direccion
ææ !
=
ææ" #
x
ææ$ %
.
ææ% &
	Direccion
ææ& /
,
ææ/ 0

Fotografia
øø "
=
øø# $
x
øø% &
.
øø& '

Fotografia
øø' 1
,
øø1 2
Musica
¿¿ 
=
¿¿  
x
¿¿! "
.
¿¿" #
Musica
¿¿# )
,
¿¿) *
Pais
¡¡ 
=
¡¡ 
x
¡¡  
.
¡¡  !
Pais
¡¡! %
,
¡¡% &

Productora
¬¬ "
=
¬¬# $
x
¬¬% &
.
¬¬& '

Productora
¬¬' 1
,
¬¬1 2
Reparto
√√ 
=
√√  !
x
√√" #
.
√√# $
Reparto
√√$ +
,
√√+ ,
Snopsis
ƒƒ 
=
ƒƒ  !
x
ƒƒ" #
.
ƒƒ# $
Snopsis
ƒƒ$ +
,
ƒƒ+ ,

Categorias
≈≈ "
=
≈≈# $
x
≈≈% &
.
≈≈& '

Categorias
≈≈' 1
.
≈≈1 2
Select
≈≈2 8
(
≈≈8 9
y
≈≈9 :
=>
≈≈; =
new
≈≈> A
CategoriaGridView
≈≈B S
(
≈≈S T
)
≈≈T U
{
∆∆ 
Id
«« 
=
««  
y
««! "
.
««" #
CategoriaId
««# .
,
««. /
Nombre
»» "
=
»»# $
y
»»% &
.
»»& '
	Categoria
»»' 0
.
»»0 1
Nombre
»»1 7
}
…… 
)
…… 
,
…… 
	ImagenUrl
   !
=
  " #
x
  $ %
.
  % &
	ImagenUrl
  & /
}
ÀÀ 
)
ÀÀ 
.
ÃÃ 
Skip
ÃÃ 
(
ÃÃ 
$num
ÃÃ 
*
ÃÃ 
model
ÃÃ #
.
ÃÃ# $
numeroPagina
ÃÃ$ 0
)
ÃÃ0 1
.
ÃÃ1 2
Take
ÃÃ2 6
(
ÃÃ6 7
$num
ÃÃ7 9
)
ÃÃ9 :
;
ÃÃ: ;
rh
ŒŒ 
.
ŒŒ 
Result
ŒŒ 
=
ŒŒ 
	lstSalida
ŒŒ %
;
ŒŒ% &
rh
–– 
.
–– 
SetResponse
–– 
(
–– 
true
–– #
,
––# $
m
––% &
:
––& '
$str
––( ,
,
––, -
	ErrorCode
––. 7
:
––7 8
$num
––9 <
)
––< =
;
––= >
}
““ 
catch
”” 
(
”” 
	Exception
”” 
e
”” 
)
”” 
{
‘‘ 
_logger
’’ 
.
’’ 
LogError
’’  
(
’’  !
e
’’! "
.
’’" #
Message
’’# *
,
’’* +
e
’’, -
)
’’- .
;
’’. /
rh
÷÷ 
.
÷÷ 
Message
÷÷ 
=
÷÷ 
e
÷÷ 
.
÷÷ 
Message
÷÷ &
;
÷÷& '
}
◊◊ 
return
ŸŸ 
rh
ŸŸ 
;
ŸŸ 
}
⁄⁄ 	
public
›› 
ResponseHelper
›› 
<
›› %
EntretenimientoGridView
›› 5
>
››5 6
	BuscarUna
››7 @
(
››@ A
Guid
››A E
Id
››F H
)
››H I
{
ﬁﬁ 	
var
ﬂﬂ 
rh
ﬂﬂ 
=
ﬂﬂ 
new
ﬂﬂ 
ResponseHelper
ﬂﬂ '
<
ﬂﬂ' (%
EntretenimientoGridView
ﬂﬂ( ?
>
ﬂﬂ? @
(
ﬂﬂ@ A
)
ﬂﬂA B
;
ﬂﬂB C
try
·· 
{
‚‚ 
var
„„ 
lstEntrenimientos
„„ %
=
„„& '
_unitOfWork
„„( 3
.
‰‰ "
_entretenimientoRepo
‰‰ )
.
ÂÂ 
FindBy
ÂÂ 
(
ÂÂ 
x
ÂÂ 
=>
ÂÂ 
x
ÂÂ  
.
ÂÂ  !
Id
ÂÂ! #
==
ÂÂ$ &
Id
ÂÂ' )
)
ÂÂ) *
;
ÂÂ* +
var
ÁÁ 
	lstSalida
ÁÁ 
=
ÁÁ 
lstEntrenimientos
ÁÁ  1
.
ËË 
AsQueryable
ËË  
(
ËË  !
)
ËË! "
.
ÈÈ 
Select
ÈÈ 
(
ÈÈ 
x
ÈÈ 
=>
ÈÈ  
new
ÈÈ! $%
EntretenimientoGridView
ÈÈ% <
{
ÍÍ 
Id
ÎÎ 
=
ÎÎ 
x
ÎÎ 
.
ÎÎ 
Id
ÎÎ !
,
ÎÎ! "
Ano
ÏÏ 
=
ÏÏ 
x
ÏÏ 
.
ÏÏ  
Ano
ÏÏ  #
,
ÏÏ# $
Titulo
ÌÌ 
=
ÌÌ  
x
ÌÌ! "
.
ÌÌ" #
Titulo
ÌÌ# )
,
ÌÌ) *
	Direccion
ÓÓ !
=
ÓÓ" #
x
ÓÓ$ %
.
ÓÓ% &
	Direccion
ÓÓ& /
,
ÓÓ/ 0

Fotografia
ÔÔ "
=
ÔÔ# $
x
ÔÔ% &
.
ÔÔ& '

Fotografia
ÔÔ' 1
,
ÔÔ1 2
Musica
 
=
  
x
! "
.
" #
Musica
# )
,
) *
Pais
ÒÒ 
=
ÒÒ 
x
ÒÒ  
.
ÒÒ  !
Pais
ÒÒ! %
,
ÒÒ% &

Productora
ÚÚ "
=
ÚÚ# $
x
ÚÚ% &
.
ÚÚ& '

Productora
ÚÚ' 1
,
ÚÚ1 2
Reparto
ÛÛ 
=
ÛÛ  !
x
ÛÛ" #
.
ÛÛ# $
Reparto
ÛÛ$ +
,
ÛÛ+ ,
Snopsis
ÙÙ 
=
ÙÙ  !
x
ÙÙ" #
.
ÙÙ# $
Snopsis
ÙÙ$ +
,
ÙÙ+ ,

Categorias
ıı "
=
ıı# $
x
ıı% &
.
ıı& '

Categorias
ıı' 1
.
ıı1 2
Select
ıı2 8
(
ıı8 9
y
ıı9 :
=>
ıı; =
new
ıı> A
CategoriaGridView
ııB S
(
ııS T
)
ııT U
{
ˆˆ 
Id
˜˜ 
=
˜˜  
y
˜˜! "
.
˜˜" #
CategoriaId
˜˜# .
,
˜˜. /
Nombre
¯¯ "
=
¯¯# $
y
¯¯% &
.
¯¯& '
	Categoria
¯¯' 0
.
¯¯0 1
Nombre
¯¯1 7
}
˘˘ 
)
˘˘ 
}
˙˙ 
)
˙˙ 
.
˙˙ 
FirstOrDefault
˙˙ %
(
˙˙% &
)
˙˙& '
;
˙˙' (
rh
¸¸ 
.
¸¸ 
Result
¸¸ 
=
¸¸ 
	lstSalida
¸¸ %
;
¸¸% &
rh
˛˛ 
.
˛˛ 
SetResponse
˛˛ 
(
˛˛ 
true
˛˛ #
,
˛˛# $
m
˛˛% &
:
˛˛& '
$str
˛˛( ,
,
˛˛, -
	ErrorCode
˛˛. 7
:
˛˛7 8
$num
˛˛9 <
)
˛˛< =
;
˛˛= >
}
ÄÄ 
catch
ÅÅ 
(
ÅÅ 
	Exception
ÅÅ 
e
ÅÅ 
)
ÅÅ 
{
ÇÇ 
_logger
ÉÉ 
.
ÉÉ 
LogError
ÉÉ  
(
ÉÉ  !
e
ÉÉ! "
.
ÉÉ" #
Message
ÉÉ# *
,
ÉÉ* +
e
ÉÉ, -
)
ÉÉ- .
;
ÉÉ. /
rh
ÑÑ 
.
ÑÑ 
Message
ÑÑ 
=
ÑÑ 
e
ÑÑ 
.
ÑÑ 
Message
ÑÑ &
;
ÑÑ& '
}
ÖÖ 
return
áá 
rh
áá 
;
áá 
}
àà 	
public
ãã 
ResponseHelper
ãã 
CrearActualizar
ãã -
(
ãã- . 
frmEntretenimiento
ãã. @
frm
ããA D
)
ããD E
{
åå 	
if
çç 
(
çç 
frm
çç 
.
çç 
Id
çç 
.
çç 
ToString
çç 
(
çç  
)
çç  !
==
çç" $
$str
çç% K
)
ççK L
{
éé 
return
èè 
Crear
èè 
(
èè 
frm
èè  
)
èè  !
;
èè! "
}
êê 
else
ëë 
{
íí 
return
ìì 

Actualizar
ìì !
(
ìì! "
frm
ìì" %
)
ìì% &
;
ìì& '
}
îî 
}
ïï 	
public
òò 
ResponseHelper
òò 
<
òò 
IEnumerable
òò )
<
òò) *%
EntretenimientoGridView
òò* A
>
òòA B
>
òòB C
PorCategoria
òòD P
(
òòP Q
Guid
òòQ U
?
òòU V
gCategoriaId
òòW c
)
òòc d
{
ôô 	
var
öö 
rh
öö 
=
öö 
new
öö 
ResponseHelper
öö '
<
öö' (
IEnumerable
öö( 3
<
öö3 4%
EntretenimientoGridView
öö4 K
>
ööK L
>
ööL M
(
ööM N
)
ööN O
;
ööO P
try
úú 
{
ùù 
var
ûû 
lstEntrenimientos
ûû %
=
ûû& '
_unitOfWork
ûû( 3
.
üü "
_entretenimientoRepo
üü )
.
†† 
GetAll
†† 
(
†† 
)
†† 
;
†† 
if
¢¢ 
(
¢¢ 
gCategoriaId
¢¢ 
!=
¢¢  "
null
¢¢# '
)
¢¢' (
{
££ 
var
§§ "
lstEntrePorCategoria
§§ ,
=
§§- .
_unitOfWork
§§/ :
.
•• %
_entretenimientoCatRepo
•• 0
.
¶¶ 
FindAll
¶¶  
(
¶¶  !
x
¶¶! "
=>
¶¶# %
x
¶¶& '
.
¶¶' (
CategoriaId
¶¶( 3
==
¶¶4 6
gCategoriaId
¶¶7 C
)
¶¶C D
.
ßß 
Select
ßß 
(
ßß  
x
ßß  !
=>
ßß" $
x
ßß% &
.
ßß& '
EntretenimientoId
ßß' 8
)
ßß8 9
;
ßß9 :
lstEntrenimientos
©© %
=
©©& '
lstEntrenimientos
©©( 9
.
™™ 
Where
™™ 
(
™™ 
x
™™  
=>
™™! #"
lstEntrePorCategoria
™™$ 8
.
™™8 9
Contains
™™9 A
(
™™A B
x
™™B C
.
™™C D
Id
™™D F
)
™™F G
)
™™G H
;
™™H I
}
´´ 
var
≠≠ 
	lstSalida
≠≠ 
=
≠≠ 
lstEntrenimientos
≠≠  1
.
ÆÆ 
Select
ÆÆ 
(
ÆÆ 
x
ÆÆ 
=>
ÆÆ  
new
ÆÆ! $%
EntretenimientoGridView
ÆÆ% <
{
ØØ 
Id
∞∞ 
=
∞∞ 
x
∞∞ 
.
∞∞ 
Id
∞∞ !
,
∞∞! "
Ano
±± 
=
±± 
x
±± 
.
±±  
Ano
±±  #
,
±±# $
Titulo
≤≤ 
=
≤≤  
x
≤≤! "
.
≤≤" #
Titulo
≤≤# )
,
≤≤) *
	Direccion
≥≥ !
=
≥≥" #
x
≥≥$ %
.
≥≥% &
	Direccion
≥≥& /
,
≥≥/ 0

Fotografia
¥¥ "
=
¥¥# $
x
¥¥% &
.
¥¥& '

Fotografia
¥¥' 1
,
¥¥1 2
Musica
µµ 
=
µµ  
x
µµ! "
.
µµ" #
Musica
µµ# )
,
µµ) *
Pais
∂∂ 
=
∂∂ 
x
∂∂  
.
∂∂  !
Pais
∂∂! %
,
∂∂% &

Productora
∑∑ "
=
∑∑# $
x
∑∑% &
.
∑∑& '

Productora
∑∑' 1
,
∑∑1 2
Reparto
∏∏ 
=
∏∏  !
x
∏∏" #
.
∏∏# $
Reparto
∏∏$ +
,
∏∏+ ,
Snopsis
ππ 
=
ππ  !
x
ππ" #
.
ππ# $
Snopsis
ππ$ +
,
ππ+ ,

Categorias
∫∫ "
=
∫∫# $
x
∫∫% &
.
∫∫& '

Categorias
∫∫' 1
.
∫∫1 2
Select
∫∫2 8
(
∫∫8 9
y
∫∫9 :
=>
∫∫; =
new
∫∫> A
CategoriaGridView
∫∫B S
(
∫∫S T
)
∫∫T U
{
ªª 
Id
ºº 
=
ºº  
y
ºº! "
.
ºº" #
CategoriaId
ºº# .
,
ºº. /
Nombre
ΩΩ "
=
ΩΩ# $
y
ΩΩ% &
.
ΩΩ& '
	Categoria
ΩΩ' 0
.
ΩΩ0 1
Nombre
ΩΩ1 7
}
ææ 
)
ææ 
,
ææ 
	ImagenUrl
øø !
=
øø" #
x
øø$ %
.
øø% &
	ImagenUrl
øø& /
}
¿¿ 
)
¿¿ 
;
¿¿ 
rh
¬¬ 
.
¬¬ 
Result
¬¬ 
=
¬¬ 
	lstSalida
¬¬ %
;
¬¬% &
rh
ƒƒ 
.
ƒƒ 
SetResponse
ƒƒ 
(
ƒƒ 
true
ƒƒ #
,
ƒƒ# $
m
ƒƒ% &
:
ƒƒ& '
$str
ƒƒ( ,
,
ƒƒ, -
	ErrorCode
ƒƒ. 7
:
ƒƒ7 8
$num
ƒƒ9 <
)
ƒƒ< =
;
ƒƒ= >
}
∆∆ 
catch
«« 
(
«« 
	Exception
«« 
e
«« 
)
«« 
{
»» 
_logger
…… 
.
…… 
LogError
……  
(
……  !
e
……! "
.
……" #
Message
……# *
,
……* +
e
……, -
)
……- .
;
……. /
rh
   
.
   
Message
   
=
   
e
   
.
   
Message
   &
;
  & '
}
ÀÀ 
return
ÕÕ 
rh
ÕÕ 
;
ÕÕ 
}
ŒŒ 	
public
—— 
ResponseHelper
—— 
<
—— 
DataTableResponse
—— /
<
——/ 0%
EntretenimientoGridView
——0 G
>
——G H
>
——H I$
PeliculasConPaginacion
——J `
(
——` a
DTParameterModel
——a q
model
——r w
)
——w x
{
““ 	
var
”” 
rh
”” 
=
”” 
new
”” 
ResponseHelper
”” '
<
””' (
DataTableResponse
””( 9
<
””9 :%
EntretenimientoGridView
””: Q
>
””Q R
>
””R S
(
””S T
)
””T U
;
””U V
try
’’ 
{
÷÷ 
int
◊◊ "
filteredResultsCount
◊◊ (
;
◊◊( )
int
ÿÿ 
totalResultsCount
ÿÿ %
;
ÿÿ% &
var
⁄⁄ 
sortedColumns
⁄⁄ !
=
⁄⁄" #
model
⁄⁄$ )
.
⁄⁄) *
Columns
⁄⁄* 1
;
⁄⁄1 2
var
€€ 
orderByString
€€ !
=
€€" #
String
€€$ *
.
€€* +
Empty
€€+ 0
;
€€0 1
orderByString
›› 
=
›› 
(
››  !
sortedColumns
››! .
[
››. /
model
››/ 4
.
››4 5
Order
››5 :
.
››: ;
FirstOrDefault
››; I
(
››I J
)
››J K
.
››K L
Column
››L R
]
››R S
.
››S T
Data
››T X
)
››X Y
+
››Z [
(
››\ ]
model
››] b
.
››b c
Order
››c h
.
››h i
FirstOrDefault
››i w
(
››w x
)
››x y
.
››y z
Dir
››z }
==››~ Ä
$str››Å Ü
?››á à
$str››â è
:››ê ë
$str››í ô
)››ô ö
;››ö õ
var
ﬂﬂ 
data
ﬂﬂ 
=
ﬂﬂ 
(
ﬂﬂ 
_unitOfWork
ﬂﬂ '
.
ﬂﬂ' ("
_entretenimientoRepo
ﬂﬂ( <
.
ﬂﬂ< =
GetAll
ﬂﬂ= C
(
ﬂﬂC D
)
ﬂﬂD E
)
ﬂﬂE F
.
‡‡ 
Select
‡‡ 
(
‡‡ 
x
‡‡ 
=>
‡‡  
new
‡‡! $%
EntretenimientoGridView
‡‡% <
{
·· 
Id
‚‚ 
=
‚‚ 
x
‚‚ 
.
‚‚ 
Id
‚‚ !
,
‚‚! "
Ano
„„ 
=
„„ 
x
„„ 
.
„„  
Ano
„„  #
,
„„# $
Titulo
‰‰ 
=
‰‰  
x
‰‰! "
.
‰‰" #
Titulo
‰‰# )
,
‰‰) *
	Direccion
ÂÂ !
=
ÂÂ" #
x
ÂÂ$ %
.
ÂÂ% &
	Direccion
ÂÂ& /
,
ÂÂ/ 0

Fotografia
ÊÊ "
=
ÊÊ# $
x
ÊÊ% &
.
ÊÊ& '

Fotografia
ÊÊ' 1
,
ÊÊ1 2
Musica
ÁÁ 
=
ÁÁ  
x
ÁÁ! "
.
ÁÁ" #
Musica
ÁÁ# )
,
ÁÁ) *
Pais
ËË 
=
ËË 
x
ËË  
.
ËË  !
Pais
ËË! %
,
ËË% &

Productora
ÈÈ "
=
ÈÈ# $
x
ÈÈ% &
.
ÈÈ& '

Productora
ÈÈ' 1
,
ÈÈ1 2
Reparto
ÍÍ 
=
ÍÍ  !
x
ÍÍ" #
.
ÍÍ# $
Reparto
ÍÍ$ +
,
ÍÍ+ ,
Snopsis
ÎÎ 
=
ÎÎ  !
x
ÎÎ" #
.
ÎÎ# $
Snopsis
ÎÎ$ +
,
ÎÎ+ ,

Categorias
ÏÏ "
=
ÏÏ# $
x
ÏÏ% &
.
ÏÏ& '

Categorias
ÏÏ' 1
.
ÏÏ1 2
Select
ÏÏ2 8
(
ÏÏ8 9
y
ÏÏ9 :
=>
ÏÏ; =
new
ÏÏ> A
CategoriaGridView
ÏÏB S
(
ÏÏS T
)
ÏÏT U
{
ÌÌ 
Id
ÓÓ 
=
ÓÓ  
y
ÓÓ! "
.
ÓÓ" #
CategoriaId
ÓÓ# .
,
ÓÓ. /
Nombre
ÔÔ "
=
ÔÔ# $
y
ÔÔ% &
.
ÔÔ& '
	Categoria
ÔÔ' 0
.
ÔÔ0 1
Nombre
ÔÔ1 7
}
 
)
 
,
 
	ImagenUrl
ÒÒ !
=
ÒÒ" #
x
ÒÒ$ %
.
ÒÒ% &
	ImagenUrl
ÒÒ& /
}
ÚÚ 
)
ÚÚ 
.
ÛÛ 
OrderBy
ÛÛ 
(
ÛÛ 
orderByString
ÛÛ *
)
ÛÛ* +
.
ÛÛ+ ,
AsQueryable
ÛÛ, 7
(
ÛÛ7 8
)
ÛÛ8 9
;
ÛÛ9 :
totalResultsCount
ıı !
=
ıı" #
data
ıı$ (
.
ıı( )
Count
ıı) .
(
ıı. /
)
ıı/ 0
;
ıı0 1
if
˜˜ 
(
˜˜ 
!
˜˜ 
String
˜˜ 
.
˜˜ 
IsNullOrEmpty
˜˜ )
(
˜˜) *
model
˜˜* /
.
˜˜/ 0
Search
˜˜0 6
.
˜˜6 7
Value
˜˜7 <
)
˜˜< =
)
˜˜= >
{
¯¯ 
data
˘˘ 
=
˘˘ 
data
˘˘ 
.
˘˘  
Where
˘˘  %
(
˘˘% &
x
˘˘& '
=>
˘˘( *
x
˙˙ 
.
˙˙ 
Titulo
˙˙ #
.
˙˙# $
ToLower
˙˙$ +
(
˙˙+ ,
)
˙˙, -
.
˙˙- .
Contains
˙˙. 6
(
˙˙6 7
model
˙˙7 <
.
˙˙< =
Search
˙˙= C
.
˙˙C D
Value
˙˙D I
.
˙˙I J
ToLower
˙˙J Q
(
˙˙Q R
)
˙˙R S
)
˙˙S T
||
˚˚ 
x
˚˚ 
.
˚˚ 
Titulo
˚˚ #
.
˚˚# $
ToLower
˚˚$ +
(
˚˚+ ,
)
˚˚, -
.
˚˚- .
EndsWith
˚˚. 6
(
˚˚6 7
model
˚˚7 <
.
˚˚< =
Search
˚˚= C
.
˚˚C D
Value
˚˚D I
.
˚˚I J
ToLower
˚˚J Q
(
˚˚Q R
)
˚˚R S
)
˚˚S T
||
˝˝ 
x
˝˝ 
.
˝˝ 
Ano
˝˝  
.
˝˝  !
ToString
˝˝! )
(
˝˝) *
)
˝˝* +
.
˝˝+ ,
EndsWith
˝˝, 4
(
˝˝4 5
model
˝˝5 :
.
˝˝: ;
Search
˝˝; A
.
˝˝A B
Value
˝˝B G
.
˝˝G H
ToLower
˝˝H O
(
˝˝O P
)
˝˝P Q
)
˝˝Q R
||
˛˛ 
x
˛˛ 
.
˛˛ 
Ano
˛˛  
.
˛˛  !
ToString
˛˛! )
(
˛˛) *
)
˛˛* +
.
˛˛+ ,
EndsWith
˛˛, 4
(
˛˛4 5
model
˛˛5 :
.
˛˛: ;
Search
˛˛; A
.
˛˛A B
Value
˛˛B G
.
˛˛G H
ToLower
˛˛H O
(
˛˛O P
)
˛˛P Q
)
˛˛Q R
||
ÄÄ 
x
ÄÄ 
.
ÄÄ 
	Direccion
ÄÄ &
.
ÄÄ& '
ToLower
ÄÄ' .
(
ÄÄ. /
)
ÄÄ/ 0
.
ÄÄ0 1
EndsWith
ÄÄ1 9
(
ÄÄ9 :
model
ÄÄ: ?
.
ÄÄ? @
Search
ÄÄ@ F
.
ÄÄF G
Value
ÄÄG L
.
ÄÄL M
ToLower
ÄÄM T
(
ÄÄT U
)
ÄÄU V
)
ÄÄV W
||
ÅÅ 
x
ÅÅ 
.
ÅÅ 
	Direccion
ÅÅ &
.
ÅÅ& '
ToLower
ÅÅ' .
(
ÅÅ. /
)
ÅÅ/ 0
.
ÅÅ0 1
EndsWith
ÅÅ1 9
(
ÅÅ9 :
model
ÅÅ: ?
.
ÅÅ? @
Search
ÅÅ@ F
.
ÅÅF G
Value
ÅÅG L
.
ÅÅL M
ToLower
ÅÅM T
(
ÅÅT U
)
ÅÅU V
)
ÅÅV W
||
ÉÉ 
x
ÉÉ 
.
ÉÉ 
Pais
ÉÉ !
.
ÉÉ! "
ToLower
ÉÉ" )
(
ÉÉ) *
)
ÉÉ* +
.
ÉÉ+ ,
EndsWith
ÉÉ, 4
(
ÉÉ4 5
model
ÉÉ5 :
.
ÉÉ: ;
Search
ÉÉ; A
.
ÉÉA B
Value
ÉÉB G
.
ÉÉG H
ToLower
ÉÉH O
(
ÉÉO P
)
ÉÉP Q
)
ÉÉQ R
||
ÑÑ 
x
ÑÑ 
.
ÑÑ 
Pais
ÑÑ !
.
ÑÑ! "
ToLower
ÑÑ" )
(
ÑÑ) *
)
ÑÑ* +
.
ÑÑ+ ,
EndsWith
ÑÑ, 4
(
ÑÑ4 5
model
ÑÑ5 :
.
ÑÑ: ;
Search
ÑÑ; A
.
ÑÑA B
Value
ÑÑB G
.
ÑÑG H
ToLower
ÑÑH O
(
ÑÑO P
)
ÑÑP Q
)
ÑÑQ R
)
ÖÖ 
;
ÖÖ 
}
ÜÜ "
filteredResultsCount
àà $
=
àà% &
data
àà' +
.
àà+ ,
Count
àà, 1
(
àà1 2
)
àà2 3
;
àà3 4
var
ää 
salida
ää 
=
ää 
data
ää !
.
ãã 
Skip
ãã !
(
ãã! "
model
ãã" '
.
ãã' (
Start
ãã( -
)
ãã- .
.
åå 
Take
åå !
(
åå! "
model
åå" '
.
åå' (
Length
åå( .
)
åå. /
;
åå/ 0
rh
éé 
.
éé 
Result
éé 
=
éé 
new
éé 
DataTableResponse
éé  1
<
éé1 2%
EntretenimientoGridView
éé2 I
>
ééI J
(
ééJ K
)
ééK L
{
èè 
draw
êê 
=
êê 
model
êê  
.
êê  !
Draw
êê! %
,
êê% &
data
ëë 
=
ëë 
salida
ëë !
.
ëë! "
ToList
ëë" (
(
ëë( )
)
ëë) *
,
ëë* +
recordsFiltered
íí #
=
íí$ %"
filteredResultsCount
íí& :
,
íí: ;
recordsTotal
ìì  
=
ìì! "
totalResultsCount
ìì# 4
}
îî 
;
îî 
rh
ïï 
.
ïï 
SetResponse
ïï 
(
ïï 
true
ïï #
)
ïï# $
;
ïï$ %
}
ññ 
catch
óó 
(
óó 
	Exception
óó 
e
óó 
)
óó 
{
òò 
_logger
ôô 
.
ôô 
LogError
ôô  
(
ôô  !
e
ôô! "
.
ôô" #
Message
ôô# *
,
ôô* +
e
ôô, -
)
ôô- .
;
ôô. /
rh
öö 
.
öö 
SetResponse
öö 
(
öö 
false
öö $
,
öö$ %
m
öö& '
:
öö' (
e
öö) *
.
öö* +
Message
öö+ 2
)
öö2 3
;
öö3 4
}
õõ 
return
ùù 
rh
ùù 
;
ùù 
}
ûû 	
private
°° 
ResponseHelper
°° 
Crear
°° $
(
°°$ % 
frmEntretenimiento
°°% 7
model
°°8 =
)
°°= >
{
¢¢ 	
var
££ 
rh
££ 
=
££ 
new
££ 
ResponseHelper
££ '
(
££' (
)
££( )
;
££) *
try
•• 
{
¶¶ 
_unitOfWork
®® 
.
®® 
BeginTransaction
®® ,
(
®®, -
)
®®- .
;
®®. /
var
™™  
clsEntretenimiento
™™ &
=
™™' (
_mapper
™™) 0
.
™™0 1
Map
™™1 4
<
™™4 5
Entretenimiento
™™5 D
>
™™D E
(
™™E F
model
™™F K
)
™™K L
;
™™L M
_unitOfWork
¨¨ 
.
¨¨ "
_entretenimientoRepo
¨¨ 0
.
≠≠ 
Add
≠≠ 
(
≠≠  
clsEntretenimiento
≠≠ +
)
≠≠+ ,
;
≠≠, -
_unitOfWork
ØØ 
.
ØØ 
Save
ØØ  
(
ØØ  !
)
ØØ! "
;
ØØ" #
var
±± )
lstEntretenimientoCategoria
±± /
=
±±0 1
model
±±2 7
.
≤≤ 

Categorias
≤≤ 
.
≥≥ 
Select
≥≥ 
(
≥≥ 
x
≥≥ 
=>
≥≥  
new
≥≥! $(
EntretenimientosCategorias
≥≥% ?
(
≥≥? @
)
≥≥@ A
{
¥¥ 
CategoriaId
µµ #
=
µµ$ %
x
µµ& '
.
µµ' (
Id
µµ( *
,
µµ* +
EntretenimientoId
∂∂ )
=
∂∂* + 
clsEntretenimiento
∂∂, >
.
∂∂> ?
Id
∂∂? A
}
∑∑ 
)
∑∑ 
;
∑∑ 
_unitOfWork
ππ 
.
ππ %
_entretenimientoCatRepo
ππ 3
.
∫∫ 
AddRange
∫∫ 
(
∫∫ )
lstEntretenimientoCategoria
∫∫ 9
)
∫∫9 :
;
∫∫: ;
_unitOfWork
ºº 
.
ºº 
BulkSaveChanges
ºº +
(
ºº+ ,
)
ºº, -
;
ºº- .
_unitOfWork
ææ 
.
ææ 
Commit
ææ "
(
ææ" #
)
ææ# $
;
ææ$ %
rh
¿¿ 
.
¿¿ 
SetResponse
¿¿ 
(
¿¿ 
true
¿¿ #
,
¿¿# $
m
¿¿% &
:
¿¿& '
$str
¿¿( ,
,
¿¿, -
	ErrorCode
¿¿. 7
:
¿¿7 8
$num
¿¿9 <
,
¿¿< =
TraId
¿¿> C
:
¿¿C D 
clsEntretenimiento
¿¿E W
.
¿¿W X
Id
¿¿X Z
.
¿¿Z [
ToString
¿¿[ c
(
¿¿c d
)
¿¿d e
)
¿¿e f
;
¿¿f g
}
¡¡ 
catch
¬¬ 
(
¬¬ 
	Exception
¬¬ 
e
¬¬ 
)
¬¬ 
{
√√ 
_logger
ƒƒ 
.
ƒƒ 
LogError
ƒƒ  
(
ƒƒ  !
e
ƒƒ! "
.
ƒƒ" #
Message
ƒƒ# *
,
ƒƒ* +
e
ƒƒ, -
)
ƒƒ- .
;
ƒƒ. /
rh
≈≈ 
.
≈≈ 
Message
≈≈ 
=
≈≈ 
e
≈≈ 
.
≈≈ 
Message
≈≈ &
;
≈≈& '
}
∆∆ 
return
»» 
rh
»» 
;
»» 
}
…… 	
private
ÃÃ 
ResponseHelper
ÃÃ 

Actualizar
ÃÃ )
(
ÃÃ) * 
frmEntretenimiento
ÃÃ* <
model
ÃÃ= B
)
ÃÃB C
{
ÕÕ 	
var
ŒŒ 
rh
ŒŒ 
=
ŒŒ 
new
ŒŒ 
ResponseHelper
ŒŒ '
(
ŒŒ' (
)
ŒŒ( )
;
ŒŒ) *
try
–– 
{
—— 
_unitOfWork
”” 
.
”” 
BeginTransaction
”” ,
(
””, -
)
””- .
;
””. /
var
’’  
clsEntretenimiento
’’ &
=
’’' (
_mapper
’’) 0
.
’’0 1
Map
’’1 4
<
’’4 5
Entretenimiento
’’5 D
>
’’D E
(
’’E F
model
’’F K
)
’’K L
;
’’L M
_unitOfWork
◊◊ 
.
◊◊ "
_entretenimientoRepo
◊◊ 0
.
ÿÿ 
Update
ÿÿ 
(
ÿÿ  
clsEntretenimiento
ÿÿ .
,
ÿÿ. /
model
ÿÿ0 5
.
ÿÿ5 6
Id
ÿÿ6 8
)
ÿÿ8 9
;
ÿÿ9 :
_unitOfWork
⁄⁄ 
.
⁄⁄ 
Save
⁄⁄  
(
⁄⁄  !
)
⁄⁄! "
;
⁄⁄" #
var
›› *
lstCategoriasEntretenimiento
›› 0
=
››1 2
_unitOfWork
››3 >
.
››> ?%
_entretenimientoCatRepo
››? V
.
ﬁﬁ 
FindBy
ﬁﬁ 
(
ﬁﬁ 
x
ﬁﬁ 
=>
ﬁﬁ  
x
ﬁﬁ! "
.
ﬁﬁ" #
EntretenimientoId
ﬁﬁ# 4
==
ﬁﬁ5 7
model
ﬁﬁ8 =
.
ﬁﬁ= >
Id
ﬁﬁ> @
)
ﬁﬁ@ A
;
ﬁﬁA B
_unitOfWork
‡‡ 
.
‡‡ %
_entretenimientoCatRepo
‡‡ 3
.
·· 
Delete
·· 
(
·· *
lstCategoriasEntretenimiento
·· 8
)
··8 9
;
··9 :
_unitOfWork
„„ 
.
„„ 
Save
„„  
(
„„  !
)
„„! "
;
„„" #
var
ÂÂ )
lstEntretenimientoCategoria
ÂÂ /
=
ÂÂ0 1
model
ÂÂ2 7
.
ÊÊ 

Categorias
ÊÊ 
.
ÁÁ 
Select
ÁÁ 
(
ÁÁ 
x
ÁÁ 
=>
ÁÁ  
new
ÁÁ! $(
EntretenimientosCategorias
ÁÁ% ?
(
ÁÁ? @
)
ÁÁ@ A
{
ËË 
CategoriaId
ÈÈ #
=
ÈÈ$ %
x
ÈÈ& '
.
ÈÈ' (
Id
ÈÈ( *
,
ÈÈ* +
EntretenimientoId
ÍÍ )
=
ÍÍ* + 
clsEntretenimiento
ÍÍ, >
.
ÍÍ> ?
Id
ÍÍ? A
}
ÎÎ 
)
ÎÎ 
;
ÎÎ 
_unitOfWork
ÌÌ 
.
ÌÌ %
_entretenimientoCatRepo
ÌÌ 3
.
ÓÓ 
AddRange
ÓÓ 
(
ÓÓ )
lstEntretenimientoCategoria
ÓÓ 9
)
ÓÓ9 :
;
ÓÓ: ;
_unitOfWork
 
.
 
Save
  
(
  !
)
! "
;
" #
_unitOfWork
ÚÚ 
.
ÚÚ 
Commit
ÚÚ "
(
ÚÚ" #
)
ÚÚ# $
;
ÚÚ$ %
rh
ÙÙ 
.
ÙÙ 
SetResponse
ÙÙ 
(
ÙÙ 
true
ÙÙ #
,
ÙÙ# $
m
ÙÙ% &
:
ÙÙ& '
$str
ÙÙ( ,
,
ÙÙ, -
	ErrorCode
ÙÙ. 7
:
ÙÙ7 8
$num
ÙÙ9 <
)
ÙÙ< =
;
ÙÙ= >
}
ıı 
catch
ˆˆ 
(
ˆˆ 
	Exception
ˆˆ 
e
ˆˆ 
)
ˆˆ 
{
˜˜ 
_logger
¯¯ 
.
¯¯ 
LogError
¯¯  
(
¯¯  !
e
¯¯! "
.
¯¯" #
Message
¯¯# *
,
¯¯* +
e
¯¯, -
)
¯¯- .
;
¯¯. /
rh
˘˘ 
.
˘˘ 
Message
˘˘ 
=
˘˘ 
e
˘˘ 
.
˘˘ 
Message
˘˘ &
;
˘˘& '
}
˙˙ 
return
¸¸ 
rh
¸¸ 
;
¸¸ 
}
˝˝ 	
}
ˇˇ 
}ÄÄ Ù&
îC:\Users\LuisOsorio\Desktop\Universidad\Semestre II\Pruebas\Proyecto Arquitectura\postgress\src\BusinessLogic\LogicServices\Services\UsersService.cs
	namespace 	
LogicServices
 
. 
Services  
{ 
public 

	interface 
IUsersService "
{ 
Task 
< 
ResponseHelper 
> 
CrearUsuario )
() *
frmRegistro* 5
model6 ;
); <
;< =
} 
public 

class 
UsersService 
: 
IUsersService  -
{ 
private 
readonly 
IUnitOfWork $
_unitOfWork% 0
;0 1
private 
readonly 
IMapper  
_mapper! (
;( )
private 
readonly 
SignInManager &
<& '
ApplicationUser' 6
>6 7
_signInManager8 F
;F G
private 
readonly 
UserManager $
<$ %
ApplicationUser% 4
>4 5
_userManager6 B
;B C
private 
readonly 
ILogger  
_logger! (
;( )
public 
UsersService 
( 
IUnitOfWork 

unitOfWork "
," #
IMapper   
mapper   
,   
UserManager!! 
<!! 
ApplicationUser!! '
>!!' (
userManager!!) 4
,!!4 5
SignInManager"" 
<"" 
ApplicationUser"" )
>"") *
signInManager""+ 8
,""8 9
ILogger## 
<## "
EntretenimientoService## *
>##* +
logger##, 2
)##2 3
{$$ 	
_unitOfWork%% 
=%% 

unitOfWork%% $
;%%$ %
_mapper&& 
=&& 
mapper&& 
;&& 
_userManager'' 
='' 
userManager'' &
;''& '
_signInManager(( 
=(( 
signInManager(( *
;((* +
_logger)) 
=)) 
logger)) 
;)) 
}** 	
public-- 
async-- 
Task-- 
<-- 
ResponseHelper-- (
>--( )
CrearUsuario--* 6
(--6 7
frmRegistro--7 B
model--C H
)--H I
{.. 	
var// 
rh// 
=// 
new// 
ResponseHelper// '
(//' (
)//( )
;//) *
try11 
{22 
var33 
user33 
=33 
new33 
ApplicationUser33 .
{33/ 0
UserName331 9
=33: ;
model33< A
.33A B
Username33B J
,33J K
Email33L Q
=33R S
model33T Y
.33Y Z
Email33Z _
,33_ `
FullName33a i
=33j k
model33l q
.33q r
FullName33r z
}33{ |
;33| }
var44 
result44 
=44 
await44 "
_userManager44# /
.44/ 0
CreateAsync440 ;
(44; <
user44< @
,44@ A
model44B G
.44G H
Password44H P
)44P Q
;44Q R
if66 
(66 
!66 
result66 
.66 
	Succeeded66 %
)66% &
{77 
rh88 
.88 
SetResponse88 "
(88" #
true88# '
,88' (
m88) *
:88* +
$str88, G
,88G H
	ErrorCode88I R
:88R S
$num88T W
,88W X
Errores88Y `
:88` a
result88b h
.88h i
Errors88i o
.88o p
Select88p v
(88v w
x88w x
=>88y {
x88| }
.88} ~
Description	88~ â
)
88â ä
.
88ä ã
ToList
88ã ë
(
88ë í
)
88í ì
)
88ì î
;
88î ï
}99 
else:: 
{;; 
rh<< 
.<< 
SetResponse<< "
(<<" #
true<<# '
,<<' (
m<<) *
:<<* +
$str<<+ E
,<<E F
	ErrorCode<<G P
:<<P Q
$num<<Q T
)<<T U
;<<U V
}== 
}>> 
catch?? 
(?? 
	Exception?? 
e?? 
)?? 
{@@ 
_loggerAA 
.AA 
LogErrorAA  
(AA  !
eAA! "
.AA" #
MessageAA# *
,AA* +
eAA, -
)AA- .
;AA. /
rhBB 
.BB 
MessageBB 
=BB 
eBB 
.BB 
MessageBB &
;BB& '
}CC 
returnDD 
rhDD 
;DD 
}EE 	
}FF 
}GG 